<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>graphics: graphics/gnuplot_.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Packages</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_dc27557eb50c9a5c2577a405955536a2.html">graphics</a></div>
<h1>gnuplot_.py</h1><a href="gnuplot___8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html">00001</a> <span class="keyword">from</span> common <span class="keyword">import</span> *
<a name="l00002"></a>00002 <span class="keyword">from</span> graphics.numpytools <span class="keyword">import</span> ones, ravel, shape, NewAxis
<a name="l00003"></a>00003 <span class="keyword">import</span> Gnuplot, tempfile, os
<a name="l00004"></a>00004 
<a name="l00005"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html">00005</a> <span class="keyword">class </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html">GnuplotBackend</a>(BaseClass):
<a name="l00006"></a>00006     <span class="stringliteral">"""</span>
<a name="l00007"></a>00007 <span class="stringliteral">    Backend using the Gnuplot.py Python module.</span>
<a name="l00008"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#389f2b959ffa71c17f0c60ac15cfd835">00008</a> <span class="stringliteral">    </span>
<a name="l00009"></a>00009 <span class="stringliteral">    Tip:</span>
<a name="l00010"></a>00010 <span class="stringliteral">        To close figure window, press &lt;q&gt; when active</span>
<a name="l00011"></a>00011 <span class="stringliteral">    """</span>
<a name="l00012"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#0dd31a3ab21df3d13c25e7d3adffdf51">00012</a> 
<a name="l00013"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">00013</a>     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#389f2b959ffa71c17f0c60ac15cfd835">__init__</a>(self):
<a name="l00014"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#614db069c72e4ce8d658499981fe7c12">00014</a>         BaseClass.__init__(self)
<a name="l00015"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#1057e10dd8d9c2f5eed1c5de7c244e66">00015</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#0dd31a3ab21df3d13c25e7d3adffdf51">init</a>init()
<a name="l00016"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c9ddae70d74ce6efdb29eab42b0b94b1">00016</a>         
<a name="l00017"></a>00017     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#0dd31a3ab21df3d13c25e7d3adffdf51">init</a>(self):
<a name="l00018"></a>00018         <span class="comment">#self._g = self.figs[self._attrs['curfig']]._g</span>
<a name="l00019"></a>00019         <span class="comment">#self.replot = self._g.replot  # Replot all plotobjects (python ojects)</span>
<a name="l00020"></a>00020         <span class="comment">#self.clear = self._g.clear    # Clear all plotobjects (python objects)</span>
<a name="l00021"></a>00021         <span class="comment">#self.reset = self._g.reset    # Reset Gnuplot, i.e. blank screen</span>
<a name="l00022"></a>00022         <span class="comment"># Necessary to add a Gnuplot Session  as _g to the Figure instance</span>
<a name="l00023"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#80aa99dd1537d67902d6ef826b586d7e">00023</a>         <span class="comment"># self._g will now point to the correct intance saved as _g in curfig</span>
<a name="l00024"></a>00024         self.figure(self._attrs[<span class="stringliteral">'curfig'</span>])
<a name="l00025"></a>00025         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set term wxt'</span>)
<a name="l00026"></a>00026 
<a name="l00027"></a>00027         <span class="comment"># Convert table for formatstrings</span>
<a name="l00028"></a>00028         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#80aa99dd1537d67902d6ef826b586d7e">_colors</a>_colors = {<span class="stringliteral">''</span>: <span class="keywordtype">None</span>,
<a name="l00029"></a>00029                         <span class="stringliteral">'k'</span>:-1,  <span class="comment"># Black</span>
<a name="l00030"></a>00030                         <span class="stringliteral">'</span><span class="stringliteral">r': 1,  # Red </span>
<a name="l00031"></a>00031 <span class="stringliteral">                        </span><span class="stringliteral">'g'</span>: 2,  <span class="comment"># Green</span>
<a name="l00032"></a>00032                         <span class="stringliteral">'b'</span>: 3,  <span class="comment"># Blue</span>
<a name="l00033"></a>00033                         <span class="stringliteral">'m'</span>: 4,  <span class="comment"># Magenta--&gt;Purple</span>
<a name="l00034"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#32a249f5ada2d1f6b70be3a357d01a1c">00034</a>                         <span class="stringliteral">'c'</span>: 5,  <span class="comment"># Cyan--&gt;Aqua</span>
<a name="l00035"></a>00035                         <span class="stringliteral">'w'</span>:-1,  <span class="comment"># White--&gt;Black, white on a white is not good</span>
<a name="l00036"></a>00036                         <span class="stringliteral">'y'</span>: 7,  <span class="comment"># Yellow--&gt;Orange    </span>
<a name="l00037"></a>00037                         }
<a name="l00038"></a>00038         
<a name="l00039"></a>00039         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#32a249f5ada2d1f6b70be3a357d01a1c">_line_types</a>_line_types = {<span class="stringliteral">''</span>: <span class="keywordtype">None</span>,           <span class="comment"># No line --&gt; point</span>
<a name="l00040"></a>00040                             <span class="stringliteral">'-'</span>: <span class="stringliteral">'lines'</span>,       <span class="comment"># Solid </span>
<a name="l00041"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#347da9352c2d724dc588fbf26f79dbce">00041</a>                             <span class="stringliteral">':'</span>: <span class="stringliteral">'lines'</span>,       <span class="comment"># Dotted line --&gt;solid</span>
<a name="l00042"></a>00042                             <span class="stringliteral">'-.'</span>:<span class="stringliteral">'lines'</span>,       <span class="comment"># Dot-dashed line --&gt;solid</span>
<a name="l00043"></a>00043                             <span class="stringliteral">'--'</span>:<span class="stringliteral">'lines'</span>,       <span class="comment"># Dashed line --&gt;solid</span>
<a name="l00044"></a>00044                             }
<a name="l00045"></a>00045         
<a name="l00046"></a>00046         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#347da9352c2d724dc588fbf26f79dbce">_point_types</a>_point_types = {<span class="stringliteral">''</span>:  <span class="keywordtype">None</span>,
<a name="l00047"></a>00047                              <span class="comment">#'v': 1, # Down-triangle --&gt;Diamond</span>
<a name="l00048"></a>00048                              <span class="comment">#'+': 2, # Plus</span>
<a name="l00049"></a>00049                              <span class="comment">#'s': 3, # Square</span>
<a name="l00050"></a>00050                              <span class="comment">#'x': 4, # Cross</span>
<a name="l00051"></a>00051                              <span class="comment">#'^': 5, # Triangle</span>
<a name="l00052"></a>00052                              <span class="comment">#'.': 6, # Dot</span>
<a name="l00053"></a>00053                              <span class="comment">#'o': 1, # Circle--&gt;Diamond  </span>
<a name="l00054"></a>00054                              <span class="stringliteral">'.'</span>: 0, <span class="comment"># point</span>
<a name="l00055"></a>00055                              <span class="stringliteral">'o'</span>: 6, <span class="comment"># circle</span>
<a name="l00056"></a>00056                              <span class="stringliteral">'+'</span>: 1, <span class="comment"># plus</span>
<a name="l00057"></a>00057                              <span class="stringliteral">'x'</span>: 2, <span class="comment"># x-mark</span>
<a name="l00058"></a>00058                              <span class="stringliteral">'*'</span>: 3, <span class="comment"># star</span>
<a name="l00059"></a>00059                              <span class="stringliteral">'s'</span>: 4, <span class="comment"># square</span>
<a name="l00060"></a>00060                              <span class="stringliteral">'d'</span>: 12,<span class="comment"># diamond</span>
<a name="l00061"></a>00061                              <span class="stringliteral">'v'</span>: 10,<span class="comment"># triangle (down)</span>
<a name="l00062"></a>00062                              <span class="stringliteral">'^'</span>: 8, <span class="comment"># triangle (up)</span>
<a name="l00063"></a>00063                              <span class="stringliteral">'&lt;'</span>: 10,<span class="comment"># triangle (left) --&gt; (down)</span>
<a name="l00064"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#9b0166c93a13c9667bace3473be08de1">00064</a>                              <span class="stringliteral">'&gt;'</span>: 10,<span class="comment"># triangle (right) --&gt; (down)</span>
<a name="l00065"></a>00065                              <span class="stringliteral">'p'</span>: 5, <span class="comment"># pentagram --&gt; square</span>
<a name="l00066"></a>00066                              <span class="stringliteral">'h'</span>: 5  <span class="comment"># hexagram --&gt; square</span>
<a name="l00067"></a>00067                              }
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#24a5af058947b4db3d0f07707dd4106a">00069</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#9b0166c93a13c9667bace3473be08de1">_shading_types</a>_shading_types = {<span class="stringliteral">'flat'</span>: <span class="stringliteral">""</span>,
<a name="l00070"></a>00070                                <span class="stringliteral">'interp'</span>: <span class="stringliteral">""</span>,
<a name="l00071"></a>00071                                <span class="stringliteral">'faceted'</span>: <span class="stringliteral">""</span>
<a name="l00072"></a>00072                                }
<a name="l00073"></a>00073 
<a name="l00074"></a>00074         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#24a5af058947b4db3d0f07707dd4106a">_colorbar_styles</a>_colorbar_styles = {
<a name="l00075"></a>00075             <span class="stringliteral">'North'</span>: (<span class="stringliteral">'horizontal'</span>,.2,.74,.6,.04),
<a name="l00076"></a>00076             <span class="stringliteral">'South'</span>: (<span class="stringliteral">'horizontal'</span>,.2,.26,.6,.04),
<a name="l00077"></a>00077             <span class="stringliteral">'East'</span>: (<span class="stringliteral">'vertical'</span>,.76,.21,.03,.6),
<a name="l00078"></a>00078             <span class="stringliteral">'West'</span>: (<span class="stringliteral">'vertical'</span>,.21,.21,.03,.6),
<a name="l00079"></a>00079             <span class="stringliteral">'NorthOutside'</span>: (<span class="stringliteral">'horizontal'</span>,.2,.92,.6,.04),
<a name="l00080"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#e878a1487617d010a519bbdcde037334">00080</a>             <span class="stringliteral">'SouthOutside'</span>: (<span class="stringliteral">'horizontal'</span>,.2,.06,.6,.04),
<a name="l00081"></a>00081             <span class="stringliteral">'EastOutside'</span>: (<span class="stringliteral">'vertical'</span>,.9,.21,.03,.6),
<a name="l00082"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#0522c9ee5aa2e2658c095b348824d42d">00082</a>             <span class="stringliteral">'WestOutside'</span>: (<span class="stringliteral">'vertical'</span>,.01,.21,.03,.6)
<a name="l00083"></a>00083             }
<a name="l00084"></a>00084         
<a name="l00085"></a>00085         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#e878a1487617d010a519bbdcde037334">_ismultiplot</a>_ismultiplot = <span class="keyword">False</span>
<a name="l00086"></a>00086         
<a name="l00087"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#795b2430bb5eeb44b038fe0838abfe82">00087</a>     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#0522c9ee5aa2e2658c095b348824d42d">_set_labels</a>(self, ax):
<a name="l00088"></a>00088         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set xlabel "%s"'</span> % ax.get(<span class="stringliteral">'xlabel'</span>))
<a name="l00089"></a>00089         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set ylabel "%s"'</span> % ax.get(<span class="stringliteral">'ylabel'</span>))
<a name="l00090"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#04747383cff5c27aac7d08364079a67b">00090</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set zlabel "%s"'</span> % ax.get(<span class="stringliteral">'zlabel'</span>))
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#795b2430bb5eeb44b038fe0838abfe82">_set_title</a>(self, ax):
<a name="l00093"></a>00093         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g.title(ax.get(<span class="stringliteral">'title'</span>))
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#04747383cff5c27aac7d08364079a67b">_set_axis_ranges</a>(self, ax):
<a name="l00096"></a>00096         fail = <span class="keyword">False</span>
<a name="l00097"></a>00097         <span class="keywordflow">for</span> item <span class="keywordflow">in</span> [<span class="stringliteral">'xmin'</span>, <span class="stringliteral">'xmax'</span>]:
<a name="l00098"></a>00098             <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(ax.get(item), (float, int)):
<a name="l00099"></a>00099                 fail = <span class="keyword">True</span>;  <span class="keywordflow">break</span>        
<a name="l00100"></a>00100         <span class="keywordflow">if</span> <span class="keywordflow">not</span> fail:
<a name="l00101"></a>00101             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set xrange[%g:%g]'</span> % (ax.get(<span class="stringliteral">'xmin'</span>), ax.get(<span class="stringliteral">'xmax'</span>)))
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         fail = <span class="keyword">False</span>
<a name="l00104"></a>00104         <span class="keywordflow">for</span> item <span class="keywordflow">in</span> [<span class="stringliteral">'ymin'</span>, <span class="stringliteral">'ymax'</span>]:
<a name="l00105"></a>00105             <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(ax.get(item), (float, int)):
<a name="l00106"></a>00106                 fail = <span class="keyword">True</span>;  <span class="keywordflow">break</span>
<a name="l00107"></a>00107         <span class="keywordflow">if</span> <span class="keywordflow">not</span> fail:       
<a name="l00108"></a>00108             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set yrange[%g:%g]'</span> % (ax.get(<span class="stringliteral">'ymin'</span>), ax.get(<span class="stringliteral">'ymax'</span>)))
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         fail = <span class="keyword">False</span>
<a name="l00111"></a>00111         <span class="keywordflow">for</span> item <span class="keywordflow">in</span> [<span class="stringliteral">'zmin'</span>, <span class="stringliteral">'zmax'</span>]:
<a name="l00112"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#657a31083b61d2d5b63f03163027fd45">00112</a>             <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(ax.get(item), (float, int)):
<a name="l00113"></a>00113                 fail = <span class="keyword">True</span>;  <span class="keywordflow">break</span>
<a name="l00114"></a>00114         <span class="keywordflow">if</span> <span class="keywordflow">not</span> fail:       
<a name="l00115"></a>00115             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set zrange[%g:%g]'</span> % (ax.get(<span class="stringliteral">'zmin'</span>), ax.get(<span class="stringliteral">'zmax'</span>)))
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#657a31083b61d2d5b63f03163027fd45">_set_viewpoint</a>(self, ax):
<a name="l00118"></a>00118         cam = ax.get(<span class="stringliteral">'camera'</span>)
<a name="l00119"></a>00119         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset view'</span>)
<a name="l00120"></a>00120         <span class="keywordflow">if</span> cam.get(<span class="stringliteral">'view'</span>) == 3:
<a name="l00121"></a>00121             az = cam.get(<span class="stringliteral">'azimuth'</span>)
<a name="l00122"></a>00122             el = cam.get(<span class="stringliteral">'elevation'</span>)
<a name="l00123"></a>00123             <span class="keywordflow">if</span> az <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> el <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00124"></a>00124                 az, el = (60,325) <span class="comment"># default 3D view in Gnuplot</span>
<a name="l00125"></a>00125             <span class="keywordflow">if</span> (az &gt;= 0 <span class="keywordflow">and</span> az &lt;= 180) <span class="keywordflow">and</span> (el &gt;= 0 <span class="keywordflow">and</span> el &lt;= 360):
<a name="l00126"></a>00126                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set view %d,%d'</span> % (az,el))
<a name="l00127"></a>00127             <span class="keywordflow">else</span>:
<a name="l00128"></a>00128                 <span class="keywordflow">print</span> <span class="stringliteral">'view (%s,%s) out of range [0:180,0:360]'</span> % (az,el)
<a name="l00129"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#d1a554fd63916b86d61d4de8e221d989">00129</a>         <span class="keywordflow">else</span>: <span class="comment"># view == 2:</span>
<a name="l00130"></a>00130             <span class="comment">#az, el = (0,0) # default 2D view in Gnuplot</span>
<a name="l00131"></a>00131             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set view map'</span>)
<a name="l00132"></a>00132             <span class="comment"># self._g('unset view') or self._g('set view auto') ???</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#d1a554fd63916b86d61d4de8e221d989">_set_hidden_state</a>(self, ax):
<a name="l00135"></a>00135         <span class="stringliteral">"""Set hidden line removal on or off."""</span>
<a name="l00136"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#7acffbca2fa5cccd4ed32c29119fccad">00136</a>         <span class="keywordflow">if</span> ax.get(<span class="stringliteral">'hidden'</span>):
<a name="l00137"></a>00137             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set hidden3d'</span>)
<a name="l00138"></a>00138         <span class="keywordflow">else</span>:
<a name="l00139"></a>00139             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset hidden3d'</span>)
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#7acffbca2fa5cccd4ed32c29119fccad">_set_colorbar_state</a>(self, ax):
<a name="l00142"></a>00142         <span class="stringliteral">"""Set colorbar on or off."""</span>
<a name="l00143"></a>00143         colorbar = ax.get(<span class="stringliteral">'colorbar'</span>)
<a name="l00144"></a>00144         cbstyle = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#24a5af058947b4db3d0f07707dd4106a">_colorbar_styles</a>_colorbar_styles[colorbar.get(<span class="stringliteral">'cblocation'</span>)]
<a name="l00145"></a>00145         <span class="keywordflow">if</span> colorbar.get(<span class="stringliteral">'visible'</span>):
<a name="l00146"></a>00146             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set style line 2604 linetype -1 linewidth .4'</span>)
<a name="l00147"></a>00147             <span class="comment">#self._g('set colorbox vertical user border 2604 size .03,.6')</span>
<a name="l00148"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c10932de24421de565c2232f21043928">00148</a>             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set colorbox %s user border 2604 origin %g,%g size %g,%g'</span>\
<a name="l00149"></a>00149                     % cbstyle)
<a name="l00150"></a>00150         <span class="keywordflow">else</span>:
<a name="l00151"></a>00151             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset colorbox'</span>)
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c10932de24421de565c2232f21043928">_set_colormap</a>(self, ax):
<a name="l00154"></a>00154         colormap = ax.get(<span class="stringliteral">'colormap'</span>)
<a name="l00155"></a>00155         <span class="keywordflow">if</span> isinstance(colormap, str):
<a name="l00156"></a>00156             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(colormap)
<a name="l00157"></a>00157         <span class="keywordflow">elif</span> isinstance(colormap, (tuple,list)) <span class="keywordflow">and</span> len(colormap) == 3 <span class="keywordflow">and</span> \
<a name="l00158"></a>00158                  isinstance(colormap[0], int) <span class="keywordflow">and</span> \
<a name="l00159"></a>00159                  isinstance(colormap[1], int) <span class="keywordflow">and</span> \
<a name="l00160"></a>00160                  isinstance(colormap[2], int):
<a name="l00161"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#5510ff9e56bff3fbd46f85d1131d41d5">00161</a>             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set palette rgbformulae %d,%d,%d'</span> % colormap) <span class="comment"># model RGB?</span>
<a name="l00162"></a>00162         <span class="keywordflow">else</span>: <span class="comment"># use default colormap</span>
<a name="l00163"></a>00163             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set palette model RGB defined (0 "blue", 3 "cyan", '</span> \
<a name="l00164"></a>00164                     <span class="stringliteral">'4 "green", 5 "yellow", 8 "red", 10 "black")'</span>)
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#5510ff9e56bff3fbd46f85d1131d41d5">_set_caxis</a>(self, ax):
<a name="l00167"></a>00167         <span class="keywordflow">if</span> ax.get(<span class="stringliteral">'caxismode'</span>) == <span class="stringliteral">'manual'</span>:
<a name="l00168"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#abefaea5b959aaf171a6e2e25ed0607b">00168</a>             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set cbrange [%d:%d]'</span> % \
<a name="l00169"></a>00169                     (int(ax.get(<span class="stringliteral">'caxis'</span>)[0]),int(ax.get(<span class="stringliteral">'caxis'</span>)[1])))
<a name="l00170"></a>00170         <span class="keywordflow">else</span>: <span class="comment"># use autoranging</span>
<a name="l00171"></a>00171             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set cbrange [*:*]'</span>)            
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#abefaea5b959aaf171a6e2e25ed0607b">_set_wireframe_state</a>(self, plotitem):
<a name="l00174"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">00174</a>         <span class="keywordflow">if</span> <span class="keywordflow">not</span> plotitem.get(<span class="stringliteral">'wireframe'</span>):
<a name="l00175"></a>00175             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set pm3d at s solid'</span>)
<a name="l00176"></a>00176         <span class="keywordflow">else</span>: 
<a name="l00177"></a>00177             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset pm3d'</span>)
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">_set_contour_state</a>(self, plotitem):
<a name="l00180"></a>00180         <span class="keywordflow">if</span> isinstance(plotitem, Contours):
<a name="l00181"></a>00181             clevels = plotitem.get(<span class="stringliteral">'clevels'</span>)
<a name="l00182"></a>00182             cvector = plotitem.get(<span class="stringliteral">'cvector'</span>)
<a name="l00183"></a>00183             clocation = plotitem.get(<span class="stringliteral">'clocation'</span>)
<a name="l00184"></a>00184             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set contour %s'</span> % clocation)
<a name="l00185"></a>00185             <span class="keywordflow">if</span> cvector <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00186"></a>00186                 cvector = <span class="stringliteral">','</span>.join([<span class="stringliteral">'%s'</span> % i <span class="keywordflow">for</span> i <span class="keywordflow">in</span> cvector])
<a name="l00187"></a>00187                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set cntrparam levels discrete %s'</span> % cvector)
<a name="l00188"></a>00188             <span class="keywordflow">else</span>:
<a name="l00189"></a>00189                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set cntrparam levels auto %d'</span> % clevels)
<a name="l00190"></a>00190             <span class="keywordflow">if</span> plotitem.get(<span class="stringliteral">'clabels'</span>):
<a name="l00191"></a>00191                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set clabel'</span>)
<a name="l00192"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#f1dbf64b03f6e764f3084198a0f06163">00192</a>             <span class="keywordflow">else</span>:
<a name="l00193"></a>00193                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset clabel'</span>)
<a name="l00194"></a>00194         <span class="keywordflow">else</span>:
<a name="l00195"></a>00195             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset contour'</span>)
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#f1dbf64b03f6e764f3084198a0f06163">_set_scale</a>(self, ax):
<a name="l00198"></a>00198         scale = ax.get(<span class="stringliteral">'scale'</span>)
<a name="l00199"></a>00199         <span class="keywordflow">if</span> scale == <span class="stringliteral">'loglog'</span>:
<a name="l00200"></a>00200             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set logscale x'</span>)
<a name="l00201"></a>00201             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set logscale y'</span>)
<a name="l00202"></a>00202             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set autoscale'</span>)
<a name="l00203"></a>00203         <span class="keywordflow">elif</span> scale == <span class="stringliteral">'logx'</span>:
<a name="l00204"></a>00204             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set logscale x'</span>)
<a name="l00205"></a>00205             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set nologscale y'</span>)
<a name="l00206"></a>00206             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set autoscale'</span>)
<a name="l00207"></a>00207         <span class="keywordflow">elif</span> scale == <span class="stringliteral">'logy'</span>:
<a name="l00208"></a>00208             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set logscale y'</span>)
<a name="l00209"></a>00209             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set nologscale x'</span>)
<a name="l00210"></a>00210             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set autoscale'</span>)
<a name="l00211"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#a876d50b632b1f1d8ab7a8da6af220ae">00211</a>         <span class="keywordflow">elif</span> scale == <span class="stringliteral">'linear'</span>:
<a name="l00212"></a>00212             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set nologscale y'</span>)
<a name="l00213"></a>00213             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set nologscale x'</span>)
<a name="l00214"></a>00214             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set autoscale'</span>)
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#a876d50b632b1f1d8ab7a8da6af220ae">_set_grid_state</a>(self, ax):
<a name="l00217"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#e85b66d5f65a204c00cc3cb1367842cb">00217</a>         <span class="keywordflow">if</span> ax.get(<span class="stringliteral">'grid'</span>):
<a name="l00218"></a>00218             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set grid'</span>)
<a name="l00219"></a>00219         <span class="keywordflow">else</span>:
<a name="l00220"></a>00220             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset grid'</span>)
<a name="l00221"></a>00221 
<a name="l00222"></a>00222     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#e85b66d5f65a204c00cc3cb1367842cb">_set_box_state</a>(self, ax):
<a name="l00223"></a>00223         <span class="keywordflow">if</span> ax.get(<span class="stringliteral">'box'</span>):
<a name="l00224"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#64ba8320738576a655ea962190e8ef2f">00224</a>             <span class="comment">#self._g('set style line 2604 linetype -1 linewidth .4')</span>
<a name="l00225"></a>00225             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set border 4095 linetype -1 linewidth .4'</span>)
<a name="l00226"></a>00226         <span class="keywordflow">else</span>: <span class="comment"># set default borders</span>
<a name="l00227"></a>00227             self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set border 1+2+4+8+16 linetype -1 linewidth .4'</span>)
<a name="l00228"></a>00228   
<a name="l00229"></a>00229     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#64ba8320738576a655ea962190e8ef2f">_get_withstring</a>(self, item):
<a name="l00230"></a>00230         linetype = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#32a249f5ada2d1f6b70be3a357d01a1c">_line_types</a>_line_types[item.get(<span class="stringliteral">'linetype'</span>)]
<a name="l00231"></a>00231         color = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#80aa99dd1537d67902d6ef826b586d7e">_colors</a>_colors[item.get(<span class="stringliteral">'linecolor'</span>)]
<a name="l00232"></a>00232         pointtype = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#347da9352c2d724dc588fbf26f79dbce">_point_types</a>_point_types[item.get(<span class="stringliteral">'linemarker'</span>)]
<a name="l00233"></a>00233         <span class="keywordflow">try</span>: pointsize = int(item.get(<span class="stringliteral">'pointsize'</span>)) <span class="comment"># "" gives error</span>
<a name="l00234"></a>00234         <span class="keywordflow">except</span>: pointsize = 1
<a name="l00235"></a>00235         <span class="comment"># ex: set linestyle 2 lt 1 lw 3 pt 6</span>
<a name="l00236"></a>00236         <span class="comment"># Can't use linetype/lt since it's not supported \</span>
<a name="l00237"></a>00237         <span class="comment"># for all versions of gnuplot (lt indicated dotted dashed etc.) </span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239         withstring = <span class="stringliteral">''</span>
<a name="l00240"></a>00240         <span class="keywordflow">if</span> color: 
<a name="l00241"></a>00241             <span class="keywordflow">if</span> linetype == <span class="keywordtype">None</span>:
<a name="l00242"></a>00242                 <span class="keywordflow">if</span> pointtype:
<a name="l00243"></a>00243                     withstring = <span class="stringliteral">"points lt %d pt %d ps %d "</span> \
<a name="l00244"></a>00244                                  % (color, pointtype, pointsize)
<a name="l00245"></a>00245                 <span class="keywordflow">else</span>:
<a name="l00246"></a>00246                     withstring = <span class="stringliteral">"lines lt %d"</span> % color <span class="comment"># Lines is default</span>
<a name="l00247"></a>00247             <span class="keywordflow">elif</span> linetype == <span class="stringliteral">'lines'</span>:
<a name="l00248"></a>00248                 <span class="keywordflow">if</span> pointtype == <span class="keywordtype">None</span>: <span class="comment"># Pointtype is not set</span>
<a name="l00249"></a>00249                     withstring = <span class="stringliteral">"lines lt %d "</span> % color
<a name="l00250"></a>00250                 <span class="keywordflow">else</span>: 
<a name="l00251"></a>00251                     withstring = <span class="stringliteral">"linespoints lt %d pt %d"</span> % (color, pointtype)
<a name="l00252"></a>00252         <span class="keywordflow">else</span>: <span class="comment"># No color</span>
<a name="l00253"></a>00253             <span class="keywordflow">if</span> linetype == <span class="keywordtype">None</span>:
<a name="l00254"></a>00254                 <span class="keywordflow">if</span> pointtype:
<a name="l00255"></a>00255                     withstring = <span class="stringliteral">"points pt %d ps %d "</span> % (pointtype, pointsize)
<a name="l00256"></a>00256                 <span class="keywordflow">else</span>:
<a name="l00257"></a>00257                     withstring = <span class="stringliteral">"lines"</span> <span class="comment"># No color, no linestyle, no marker</span>
<a name="l00258"></a>00258             <span class="keywordflow">elif</span> linetype == <span class="stringliteral">'lines'</span>:
<a name="l00259"></a>00259                 <span class="keywordflow">if</span> pointtype == <span class="keywordtype">None</span>: <span class="comment"># Pointtype is not set</span>
<a name="l00260"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c18857a5007df0f6323b9821bbaeac8b">00260</a>                     withstring = <span class="stringliteral">"lines"</span> 
<a name="l00261"></a>00261                 <span class="keywordflow">else</span>: 
<a name="l00262"></a>00262                     withstring = <span class="stringliteral">"linespoints pt %d"</span> % pointtype
<a name="l00263"></a>00263         <span class="keywordflow">return</span> withstring
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c18857a5007df0f6323b9821bbaeac8b">_set_common_3D_properties</a>(self, ax, item):
<a name="l00266"></a>00266         <span class="comment">#self._set_viewpoint(ax)</span>
<a name="l00267"></a>00267         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#d1a554fd63916b86d61d4de8e221d989">_set_hidden_state</a>_set_hidden_state(ax)
<a name="l00268"></a>00268         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#7acffbca2fa5cccd4ed32c29119fccad">_set_colorbar_state</a>_set_colorbar_state(ax)
<a name="l00269"></a>00269         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c10932de24421de565c2232f21043928">_set_colormap</a>_set_colormap(ax)
<a name="l00270"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#62f500f4479bd773e207e37d5a1dc81b">00270</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#abefaea5b959aaf171a6e2e25ed0607b">_set_wireframe_state</a>_set_wireframe_state(item)
<a name="l00271"></a>00271         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">_set_contour_state</a>_set_contour_state(item)
<a name="l00272"></a>00272         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#a876d50b632b1f1d8ab7a8da6af220ae">_set_grid_state</a>_set_grid_state(ax)
<a name="l00273"></a>00273         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#e85b66d5f65a204c00cc3cb1367842cb">_set_box_state</a>_set_box_state(ax)
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#62f500f4479bd773e207e37d5a1dc81b">_set_common_2D_properties</a>(self, ax, item):
<a name="l00276"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#6bb638c437e8ee323b7ef91d4b22a31b">00276</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#c10932de24421de565c2232f21043928">_set_colormap</a>_set_colormap(ax)
<a name="l00277"></a><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">00277</a>         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">_set_contour_state</a>_set_contour_state(item)
<a name="l00278"></a>00278         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#a876d50b632b1f1d8ab7a8da6af220ae">_set_grid_state</a>_set_grid_state(ax)
<a name="l00279"></a>00279         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set border 4095 linetype -1 linewidth .4'</span>)
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="keyword">def </span><a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#6bb638c437e8ee323b7ef91d4b22a31b">_create_gnuplot_data</a>(self, ax):
<a name="l00282"></a>00282         self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">_use_splot</a>_use_splot = <span class="keyword">False</span>
<a name="l00283"></a>00283         ax._gdata = []
<a name="l00284"></a>00284 
<a name="l00285"></a>00285         <span class="keywordflow">for</span> item <span class="keywordflow">in</span> ax.get(<span class="stringliteral">'plotitems'</span>):
<a name="l00286"></a>00286             <span class="keywordflow">if</span> isinstance(item, Line):
<a name="l00287"></a>00287                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">_use_splot</a>_use_splot = <span class="keyword">False</span>
<a name="l00288"></a>00288                 withstring = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#64ba8320738576a655ea962190e8ef2f">_get_withstring</a>_get_withstring(item)
<a name="l00289"></a>00289                 ax._gdata.append(Gnuplot.Data(item.get(<span class="stringliteral">'xdata'</span>),
<a name="l00290"></a>00290                                               item.get(<span class="stringliteral">'ydata'</span>),
<a name="l00291"></a>00291                                               title=item.get(<span class="stringliteral">'legend'</span>),
<a name="l00292"></a>00292                                               with=withstring))
<a name="l00293"></a>00293             <span class="keywordflow">elif</span> isinstance(item, Surface):
<a name="l00294"></a>00294                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">_use_splot</a>_use_splot = <span class="keyword">True</span>
<a name="l00295"></a>00295                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#abefaea5b959aaf171a6e2e25ed0607b">_set_wireframe_state</a>_set_wireframe_state(item)
<a name="l00296"></a>00296                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set surface'</span>)
<a name="l00297"></a>00297                 x = item.get(<span class="stringliteral">'xdata'</span>)
<a name="l00298"></a>00298                 y = item.get(<span class="stringliteral">'ydata'</span>)
<a name="l00299"></a>00299                 <span class="keywordflow">if</span> len(shape(x)) == 2 <span class="keywordflow">and</span> len(shape(y)) == 2:
<a name="l00300"></a>00300                     x = x[:,0];  y = y[0,:]
<a name="l00301"></a>00301                 data = Gnuplot.GridData(item.get(<span class="stringliteral">'zdata'</span>), x, y,
<a name="l00302"></a>00302                                         title=item.get(<span class="stringliteral">'legend'</span>),
<a name="l00303"></a>00303                                         with=<span class="stringliteral">'l palette'</span>,
<a name="l00304"></a>00304                                         binary=0)
<a name="l00305"></a>00305                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">_set_contour_state</a>_set_contour_state(item.get(<span class="stringliteral">'contours'</span>))
<a name="l00306"></a>00306                 ax._gdata.append(data)
<a name="l00307"></a>00307             <span class="keywordflow">elif</span> isinstance(item, Contours):
<a name="l00308"></a>00308                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">_use_splot</a>_use_splot = <span class="keyword">True</span>
<a name="l00309"></a>00309                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#facddb50570db6fbe65cc470b86cc0ea">_set_contour_state</a>_set_contour_state(item)
<a name="l00310"></a>00310                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'set surface'</span>)
<a name="l00311"></a>00311                 x = item.get(<span class="stringliteral">'xdata'</span>)
<a name="l00312"></a>00312                 y = item.get(<span class="stringliteral">'ydata'</span>)
<a name="l00313"></a>00313                 <span class="keywordflow">if</span> len(shape(x)) == 2 <span class="keywordflow">and</span> len(shape(y)) == 2:
<a name="l00314"></a>00314                     x = x[:,0];  y = y[0,:]
<a name="l00315"></a>00315                 tmp_data = Gnuplot.GridData(item.get(<span class="stringliteral">'zdata'</span>), x, y,
<a name="l00316"></a>00316                                             title=item.get(<span class="stringliteral">'legend'</span>),
<a name="l00317"></a>00317                                             binary=0,
<a name="l00318"></a>00318                                             with=<span class="stringliteral">'l palette'</span>)
<a name="l00319"></a>00319                 <span class="comment">#self._g('set view map') #self._g('set view 0,0,1,1') </span>
<a name="l00320"></a>00320                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#4840a2e83b8a966ddf1992d7b1d0116f">_g</a>_g(<span class="stringliteral">'unset surface'</span>)
<a name="l00321"></a>00321                 <span class="comment">#self._g('unset pm3d')</span>
<a name="l00322"></a>00322 <span class="comment">##                 fname = tempfile.mktemp(suffix='.dat')</span>
<a name="l00323"></a>00323 <span class="comment">##                 self._g('set term push')</span>
<a name="l00324"></a>00324 <span class="comment">##                 self._g('set term table')</span>
<a name="l00325"></a>00325 <span class="comment">##                 self._g('set out "%s"' % fname)</span>
<a name="l00326"></a>00326 <span class="comment">##                 self._g.splot(tmp_data)</span>
<a name="l00327"></a>00327 <span class="comment">##                 self._g('set out')</span>
<a name="l00328"></a>00328 <span class="comment">##                 self._g('set term pop')</span>
<a name="l00329"></a>00329 <span class="comment">##                 data = Gnuplot.File(fname,</span>
<a name="l00330"></a>00330 <span class="comment">##                                     title=item.get('legend'),</span>
<a name="l00331"></a>00331 <span class="comment">##                                     with='l palette')</span>
<a name="l00332"></a>00332                 ax._gdata.append(tmp_data)
<a name="l00333"></a>00333             <span class="keywordflow">elif</span> isinstance(item, VelocityVectors):
<a name="l00334"></a>00334                 <span class="keywordflow">if</span> item.get(<span class="stringliteral">'function'</span>) == <span class="stringliteral">'quiver3'</span>:
<a name="l00335"></a>00335                     <span class="keywordflow">print</span> <span class="stringliteral">"quiver3 not supported under Gnuplot"</span>
<a name="l00336"></a>00336                     <span class="keywordflow">continue</span>
<a name="l00337"></a>00337                 withstring = <span class="stringliteral">'vectors'</span>
<a name="l00338"></a>00338                 color = self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#80aa99dd1537d67902d6ef826b586d7e">_colors</a>_colors[item.get(<span class="stringliteral">'linecolor'</span>)]
<a name="l00339"></a>00339                 <span class="keywordflow">if</span> color:
<a name="l00340"></a>00340                     withstring += <span class="stringliteral">' lt %d'</span> % color
<a name="l00341"></a>00341                 linewidth = item.get(<span class="stringliteral">'linewidth'</span>)
<a name="l00342"></a>00342                 <span class="keywordflow">if</span> linewidth:
<a name="l00343"></a>00343                     withstring += <span class="stringliteral">' lw %g'</span> % float(item.get(<span class="stringliteral">'linewidth'</span>))
<a name="l00344"></a>00344                 x = item.get(<span class="stringliteral">'xdata'</span>)
<a name="l00345"></a>00345                 y = item.get(<span class="stringliteral">'ydata'</span>)
<a name="l00346"></a>00346                 u = item.get(<span class="stringliteral">'udata'</span>)
<a name="l00347"></a>00347                 v = item.get(<span class="stringliteral">'vdata'</span>)
<a name="l00348"></a>00348                 <span class="keywordflow">if</span> shape(x) != shape(u):
<a name="l00349"></a>00349                     <span class="keywordflow">if</span> len(shape(x)) == 2:
<a name="l00350"></a>00350                         x = x*ones(shape(u))
<a name="l00351"></a>00351                     <span class="keywordflow">else</span>:
<a name="l00352"></a>00352                         x = x[:,NewAxis]*ones(shape(u))
<a name="l00353"></a>00353                 <span class="keywordflow">if</span> shape(y) != shape(u):
<a name="l00354"></a>00354                     <span class="keywordflow">if</span> len(shape(y)) == 2:
<a name="l00355"></a>00355                         y = y*ones(shape(u))
<a name="l00356"></a>00356                     <span class="keywordflow">else</span>:
<a name="l00357"></a>00357                         y = y[NewAxis,:]*ones(shape(u))
<a name="l00358"></a>00358                 data = Gnuplot.Data(ravel(x), ravel(y),
<a name="l00359"></a>00359                                     ravel(u), ravel(v),
<a name="l00360"></a>00360                                     title=item.get(<span class="stringliteral">'legend'</span>),
<a name="l00361"></a>00361                                     with=withstring)
<a name="l00362"></a>00362                 ax._gdata.append(data)
<a name="l00363"></a>00363                 self.<a class="code" href="classgraphics_1_1gnuplot___1_1GnuplotBackend.html#931c9de02c4df5bcadfe10e676c58989">_use_splot</a>_use_splot = <span class="keyword">False</span>
<a name="l00364"></a>00364             <span class="keywordflow">else</span>:
<a name="l00365"></a>00365                 <span class="keywordflow">print</span> <span class="stringliteral">"plotting of %s objects, is not supported under Gnuplot"</span>\
<a name="l00366"></a>00366                       % type(item)
<a name="l00367"></a>00367                 
<a name="l00368"></a>00368         self._gdata = ax._gdata
<a name="l00369"></a>00369         <span class="comment">#print "withstring", withstring</span>
<a name="l00370"></a>00370         <span class="comment">#print fig._gdata[0].get_command_option_string()</span>
<a name="l00371"></a>00371                 
<a name="l00372"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#f6cd5539c7e446ed27047a5740d23adf">00372</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#f6cd5539c7e446ed27047a5740d23adf">figure</a>(self, *args, **kwargs):
<a name="l00373"></a>00373         <span class="stringliteral">"""Extension of BaseClass.figure:</span>
<a name="l00374"></a>00374 <span class="stringliteral">        adds a gnuplot instance as figure._g then creates a link to it as</span>
<a name="l00375"></a>00375 <span class="stringliteral">        object._g</span>
<a name="l00376"></a>00376 <span class="stringliteral">        """</span>
<a name="l00377"></a>00377         
<a name="l00378"></a>00378         BaseClass.figure(self, *args, **kwargs) 
<a name="l00379"></a>00379         fig = self.gcf()
<a name="l00380"></a>00380 
<a name="l00381"></a>00381         <span class="keywordflow">try</span>:
<a name="l00382"></a>00382             fig._g
<a name="l00383"></a>00383         <span class="keywordflow">except</span>:
<a name="l00384"></a>00384             <span class="keywordflow">try</span>:
<a name="l00385"></a>00385                 fig._g = Gnuplot.Gnuplot(persist=1)
<a name="l00386"></a>00386                 <span class="comment"># Plotwindow will now persist</span>
<a name="l00387"></a>00387                 <span class="comment"># To close the gnuplot session run fig._g('quit')</span>
<a name="l00388"></a>00388                 <span class="comment"># Python will only remove the binding to the session and not</span>
<a name="l00389"></a>00389                 <span class="comment"># stop it when _g is deleted            </span>
<a name="l00390"></a>00390                 <span class="comment"># This is due to the persist=1 parameter</span>
<a name="l00391"></a>00391             <span class="keywordflow">except</span>:
<a name="l00392"></a>00392                 fig._g = Gnuplot.Gnuplot() <span class="comment"># Persist is not supported under win</span>
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#7de9f58d35d79940740ca3ef047b5f29">00394</a>         self._g = fig._g <span class="comment"># Creates link for faster access</span>
<a name="l00395"></a>00395         
<a name="l00396"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#fab5497b713e38bc0b41716721e63623">00396</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#fab5497b713e38bc0b41716721e63623">_replot_old</a>(self):
<a name="l00397"></a>00397         fig = self.gcf()
<a name="l00398"></a>00398         fig_axes = fig.get(<span class="stringliteral">'axes'</span>)
<a name="l00399"></a>00399         <span class="keywordflow">for</span> ax <span class="keywordflow">in</span> fig_axes.values():
<a name="l00400"></a>00400             <span class="keywordflow">pass</span>
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         <span class="comment">#self._g.reset() # reset everytime?</span>
<a name="l00403"></a>00403         ax = self.gca()
<a name="l00404"></a>00404 
<a name="l00405"></a>00405         axshape = fig.get(<span class="stringliteral">'axshape'</span>)
<a name="l00406"></a>00406         <span class="keywordflow">if</span> axshape != (1,1): <span class="comment"># subplots</span>
<a name="l00407"></a>00407             <span class="keywordflow">if</span> <span class="keywordflow">not</span> self._ismultiplot:
<a name="l00408"></a>00408                 self._g(<span class="stringliteral">'set multiplot'</span>)
<a name="l00409"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#9d1aaefaf83c569f392ec7dc3bdb3e54">00409</a>                 self._ismultiplot = <span class="keyword">True</span>
<a name="l00410"></a>00410                 <span class="comment">#print 'setting multiplot'</span>
<a name="l00411"></a>00411             viewport = ax.get(<span class="stringliteral">'viewport'</span>)
<a name="l00412"></a>00412             origin = viewport[:2]
<a name="l00413"></a>00413             <span class="comment">#print 'origin:', origin</span>
<a name="l00414"></a>00414             self._g(<span class="stringliteral">'set origin %g,%g'</span> % origin)
<a name="l00415"></a>00415             size = 1./axshape[1], 1./axshape[0]
<a name="l00416"></a>00416             <span class="comment">#print 'size:', size</span>
<a name="l00417"></a>00417             self._g(<span class="stringliteral">'set size %g,%g'</span> % size)
<a name="l00418"></a>00418         <span class="keywordflow">else</span>:
<a name="l00419"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#9d1aaefaf83c569f392ec7dc3bdb3e54">00419</a>             self._ismultiplot = <span class="keyword">False</span>
<a name="l00420"></a>00420             self._g(<span class="stringliteral">'unset multiplot'</span>)
<a name="l00421"></a>00421         
<a name="l00422"></a>00422         self._create_gnuplot_data()
<a name="l00423"></a>00423 
<a name="l00424"></a>00424         self._set_viewpoint(ax)
<a name="l00425"></a>00425         self._set_hidden_state(ax)
<a name="l00426"></a>00426         self._set_colorbar_state(ax)
<a name="l00427"></a>00427         self._set_colormap(ax)
<a name="l00428"></a>00428         self._set_grid_state(ax)
<a name="l00429"></a>00429         self._set_box_state(ax)
<a name="l00430"></a>00430         self._set_scale(ax)            
<a name="l00431"></a>00431         self._set_labels(ax)
<a name="l00432"></a>00432         self._set_title(ax)
<a name="l00433"></a>00433         self._set_axis_ranges(ax)
<a name="l00434"></a>00434         self._set_caxis(ax)
<a name="l00435"></a>00435         <span class="comment">#self._g('set border 4095 linetype -1 linewidth .4')</span>
<a name="l00436"></a>00436         
<a name="l00437"></a>00437         <span class="comment"># Plot data</span>
<a name="l00438"></a>00438         <span class="keywordflow">if</span> len(ax._gdata) &gt; 0:
<a name="l00439"></a>00439             <span class="keywordflow">if</span> self._use_splot:
<a name="l00440"></a>00440                 <span class="comment">#self._g('set style data points') # not here</span>
<a name="l00441"></a>00441                 <span class="comment">#self._g('set data style points')</span>
<a name="l00442"></a>00442                 self._g.splot(ax._gdata[0])
<a name="l00443"></a>00443             <span class="keywordflow">else</span>:
<a name="l00444"></a>00444                 self._g.plot(ax._gdata[0])
<a name="l00445"></a>00445             
<a name="l00446"></a>00446             <span class="keywordflow">if</span> len(ax._gdata) &gt; 1:
<a name="l00447"></a>00447                 <span class="keywordflow">for</span> item <span class="keywordflow">in</span> ax._gdata[1:]:
<a name="l00448"></a>00448                     self._g.replot(item)
<a name="l00449"></a>00449 
<a name="l00450"></a>00450             <span class="comment"># Why is this now necessary to get titles and labels right?</span>
<a name="l00451"></a>00451             <span class="comment">#self._g.replot()</span>
<a name="l00452"></a>00452 
<a name="l00453"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#52743b4fbd869df34091db9c48a1e374">00453</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#52743b4fbd869df34091db9c48a1e374">_replot</a>(self):
<a name="l00454"></a>00454         fig = self.gcf()
<a name="l00455"></a>00455         fig_axes = fig.get(<span class="stringliteral">'axes'</span>)
<a name="l00456"></a>00456         self._g.reset() <span class="comment"># reset everytime</span>
<a name="l00457"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#9d1aaefaf83c569f392ec7dc3bdb3e54">00457</a>         self._ismultiplot = <span class="keyword">False</span>
<a name="l00458"></a>00458         self._g(<span class="stringliteral">'unset multiplot'</span>)
<a name="l00459"></a>00459         <span class="keywordflow">for</span> ax <span class="keywordflow">in</span> fig_axes.values():
<a name="l00460"></a>00460             axshape = fig.get(<span class="stringliteral">'axshape'</span>)
<a name="l00461"></a>00461             <span class="keywordflow">if</span> axshape != (1,1): <span class="comment"># subplots</span>
<a name="l00462"></a>00462                 <span class="keywordflow">if</span> <span class="keywordflow">not</span> self._ismultiplot:
<a name="l00463"></a>00463                     self._g(<span class="stringliteral">'set multiplot'</span>)
<a name="l00464"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#9d1aaefaf83c569f392ec7dc3bdb3e54">00464</a>                     self._ismultiplot = <span class="keyword">True</span>
<a name="l00465"></a>00465                     <span class="comment">#print 'setting multiplot'</span>
<a name="l00466"></a>00466                 viewport = ax.get(<span class="stringliteral">'viewport'</span>)
<a name="l00467"></a>00467                 <span class="keywordflow">if</span> <span class="keywordflow">not</span> viewport:
<a name="l00468"></a>00468                     viewport = (0,0,1,1)
<a name="l00469"></a>00469                 origin = viewport[:2]
<a name="l00470"></a>00470                 size = 1./axshape[1], 1./axshape[0]
<a name="l00471"></a>00471                 self._g(<span class="stringliteral">'set origin %g,%g'</span> % origin)
<a name="l00472"></a>00472                 self._g(<span class="stringliteral">'set size %g,%g'</span> % size)
<a name="l00473"></a>00473             <span class="keywordflow">else</span>:
<a name="l00474"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#9d1aaefaf83c569f392ec7dc3bdb3e54">00474</a>                 self._ismultiplot = <span class="keyword">False</span>
<a name="l00475"></a>00475                 self._g(<span class="stringliteral">'unset multiplot'</span>)
<a name="l00476"></a>00476 
<a name="l00477"></a>00477             <span class="keywordflow">if</span> len(ax.get(<span class="stringliteral">'plotitems'</span>)) &gt; 0:
<a name="l00478"></a>00478                 self._create_gnuplot_data(ax)
<a name="l00479"></a>00479 
<a name="l00480"></a>00480                 self._set_viewpoint(ax)
<a name="l00481"></a>00481                 self._set_hidden_state(ax)
<a name="l00482"></a>00482                 self._set_colorbar_state(ax)
<a name="l00483"></a>00483                 self._set_colormap(ax)
<a name="l00484"></a>00484                 self._set_grid_state(ax)
<a name="l00485"></a>00485                 self._set_box_state(ax)
<a name="l00486"></a>00486                 self._set_scale(ax)            
<a name="l00487"></a>00487                 self._set_labels(ax)
<a name="l00488"></a>00488                 self._set_title(ax)
<a name="l00489"></a>00489                 self._set_axis_ranges(ax)
<a name="l00490"></a>00490                 self._set_caxis(ax)
<a name="l00491"></a>00491                 <span class="comment">#self._g('set border 4095 linetype -1 linewidth .4')</span>
<a name="l00492"></a>00492         
<a name="l00493"></a>00493                 <span class="comment"># Plot data</span>
<a name="l00494"></a>00494                 <span class="keywordflow">if</span> len(ax._gdata) &gt; 0:
<a name="l00495"></a>00495                     <span class="keywordflow">if</span> self._use_splot:
<a name="l00496"></a>00496                         <span class="comment">#self._g('set style data points') # not here</span>
<a name="l00497"></a>00497                         <span class="comment">#self._g('set data style points')</span>
<a name="l00498"></a>00498                         self._g.splot(ax._gdata[0])
<a name="l00499"></a>00499                     <span class="keywordflow">else</span>:
<a name="l00500"></a>00500                         self._g.plot(ax._gdata[0])
<a name="l00501"></a>00501             
<a name="l00502"></a>00502                     <span class="keywordflow">if</span> len(ax._gdata) &gt; 1:
<a name="l00503"></a>00503                         <span class="keywordflow">for</span> item <span class="keywordflow">in</span> ax._gdata[1:]:
<a name="l00504"></a>00504                             self._g.replot(item)
<a name="l00505"></a>00505 
<a name="l00506"></a>00506                     <span class="comment"># Why is this now necessary to get titles and labels right?</span>
<a name="l00507"></a>00507                     <span class="comment">#self._g.replot()</span>
<a name="l00508"></a>00508 
<a name="l00509"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#5468df4b081ec36c3e857f22d2fdc7de">00509</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#5468df4b081ec36c3e857f22d2fdc7de">clf</a>(self):
<a name="l00510"></a>00510         <span class="stringliteral">"""Clear current figure."""</span>
<a name="l00511"></a>00511         BaseClass.clf(self)
<a name="l00512"></a>00512         self._g.reset() <span class="comment"># reset gnuplot instance</span>
<a name="l00513"></a>00513 
<a name="l00514"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#301206ddf83451d1f6ab5982a240e7f9">00514</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#301206ddf83451d1f6ab5982a240e7f9">closeall</a>(self):
<a name="l00515"></a>00515         <span class="stringliteral">"""close figurewindows and stop gnuplot """</span>
<a name="l00516"></a>00516         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self._figs.keys():
<a name="l00517"></a>00517             self._figs[key]._g(<span class="stringliteral">'quit'</span>)
<a name="l00518"></a>00518         del self._g
<a name="l00519"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#07b0090caf576c1e01fa661729e0e68f">00519</a>         self._figs = {1:Figure()}
<a name="l00520"></a>00520         self._figs[1]._g = Gnuplot.Gnuplot()
<a name="l00521"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#7de9f58d35d79940740ca3ef047b5f29">00521</a>         self._g = self._figs[1]._g
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#a1c374e62b36298929369c365cf117d4">00523</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#a1c374e62b36298929369c365cf117d4">hardcopy</a>(self, filename=None, **kwargs):
<a name="l00524"></a>00524         <span class="stringliteral">"""The Gnuplot backend supports currently the following file formats:</span>
<a name="l00525"></a>00525 <span class="stringliteral">        '.ps' (Postscript), '.eps' (Encapsulated Postscript), and</span>
<a name="l00526"></a>00526 <span class="stringliteral">        '.png' (Portable Network Graphics).</span>
<a name="l00527"></a>00527 <span class="stringliteral">        """</span>
<a name="l00528"></a>00528         <span class="keywordflow">if</span> <span class="keywordflow">not</span> filename:
<a name="l00529"></a>00529             <span class="keywordflow">raise</span> TypeError, <span class="stringliteral">"hardcopy: no file name given"</span>
<a name="l00530"></a>00530         ext2term = {<span class="stringliteral">'.ps'</span>: <span class="stringliteral">'postscript'</span>,
<a name="l00531"></a>00531                     <span class="stringliteral">'.eps'</span>: <span class="stringliteral">'postscript'</span>,
<a name="l00532"></a>00532                     <span class="stringliteral">'.png'</span>: <span class="stringliteral">'png'</span>}
<a name="l00533"></a>00533         junk, ext = os.path.splitext(filename)
<a name="l00534"></a>00534         <span class="keywordflow">if</span> ext <span class="keywordflow">not</span> <span class="keywordflow">in</span> ext2term:
<a name="l00535"></a>00535             ext = <span class="stringliteral">'.ps'</span>
<a name="l00536"></a>00536             filename += ext
<a name="l00537"></a>00537         terminal = ext2term.get(ext, <span class="stringliteral">'postscript'</span>)
<a name="l00538"></a>00538         
<a name="l00539"></a>00539         self.set(**kwargs)
<a name="l00540"></a>00540         fontname = kwargs.get(<span class="stringliteral">'fontname'</span>, <span class="stringliteral">'Times-Roman'</span>)
<a name="l00541"></a>00541         fontsize = kwargs.get(<span class="stringliteral">'fontsize'</span>, 20)
<a name="l00542"></a>00542         color = self.get(<span class="stringliteral">'color'</span>)
<a name="l00543"></a>00543                   
<a name="l00544"></a>00544         self._g(<span class="stringliteral">'unset multiplot'</span>) <span class="comment"># is this necessary?</span>
<a name="l00545"></a>00545         
<a name="l00546"></a>00546         <span class="keywordflow">if</span> self.get(<span class="stringliteral">'show'</span>): <span class="comment"># OK to display to screen</span>
<a name="l00547"></a>00547             self._replot()
<a name="l00548"></a>00548             kwargs = {<span class="stringliteral">'filename'</span>: filename, <span class="stringliteral">'terminal'</span>: terminal}
<a name="l00549"></a>00549             <span class="keywordflow">if</span> terminal == <span class="stringliteral">'postscript'</span>:
<a name="l00550"></a>00550                 kwargs.update({<span class="stringliteral">'color'</span>: color, <span class="stringliteral">'enhanced'</span>: <span class="keyword">True</span>,
<a name="l00551"></a>00551                                <span class="stringliteral">'fontname'</span>: fontname, <span class="stringliteral">'fontsize'</span>: fontsize})
<a name="l00552"></a>00552                 <span class="keywordflow">if</span> ext == <span class="stringliteral">'.eps'</span>:
<a name="l00553"></a>00553                     kwargs[<span class="stringliteral">'mode'</span>] = <span class="stringliteral">'eps'</span>
<a name="l00554"></a>00554                 <span class="keywordflow">else</span>:
<a name="l00555"></a>00555                     kwargs[<span class="stringliteral">'mode'</span>] = <span class="stringliteral">'portrait'</span>
<a name="l00556"></a>00556             self._g.hardcopy(**kwargs)
<a name="l00557"></a>00557         <span class="keywordflow">else</span>: <span class="comment"># Manually set terminal and don't show windows</span>
<a name="l00558"></a>00558             <span class="keywordflow">if</span> color:
<a name="l00559"></a>00559                 colortype = <span class="stringliteral">'color'</span>
<a name="l00560"></a>00560             <span class="keywordflow">else</span>:
<a name="l00561"></a>00561                 colortype = <span class="stringliteral">'monochrome'</span>
<a name="l00562"></a>00562                         
<a name="l00563"></a>00563             <span class="comment"># Create a new Gnuplot instance only for now</span>
<a name="l00564"></a>00564             self._g = Gnuplot.Gnuplot()
<a name="l00565"></a>00565             kwargs = {<span class="stringliteral">'filename'</span>: filename, <span class="stringliteral">'terminal'</span>: terminal}
<a name="l00566"></a>00566             <span class="keywordflow">if</span> terminal == <span class="stringliteral">'postscript'</span>:
<a name="l00567"></a>00567                 kwargs.update({<span class="stringliteral">'color'</span>: color, <span class="stringliteral">'enhanced'</span>: <span class="keyword">True</span>, 
<a name="l00568"></a>00568                                <span class="stringliteral">'fontname'</span>: fontname, <span class="stringliteral">'fontsize'</span>: fontsize})
<a name="l00569"></a>00569                 <span class="keywordflow">if</span> ext == <span class="stringliteral">'.eps'</span>:
<a name="l00570"></a>00570                     self._g(<span class="stringliteral">'set term postscript eps %s'</span> % colortype)
<a name="l00571"></a>00571                     kwargs[<span class="stringliteral">'mode'</span>] = <span class="stringliteral">'eps'</span>
<a name="l00572"></a>00572                 <span class="keywordflow">else</span>:
<a name="l00573"></a>00573                     self._g(<span class="stringliteral">'set term postscript portrait %s'</span> % colortype)
<a name="l00574"></a>00574                     kwargs[<span class="stringliteral">'mode'</span>] = <span class="stringliteral">'portrait'</span>
<a name="l00575"></a>00575             <span class="keywordflow">elif</span> terminal == <span class="stringliteral">'png'</span>:
<a name="l00576"></a>00576                 self._g(<span class="stringliteral">'set term png'</span>)
<a name="l00577"></a>00577             self._g(<span class="stringliteral">'set output "%s"'</span> % filename)
<a name="l00578"></a>00578             self._replot()
<a name="l00579"></a>00579             self._g.hardcopy(**kwargs)
<a name="l00580"></a>00580             self._g(<span class="stringliteral">'quit'</span>)
<a name="l00581"></a>00581             self._g = self.gcf()._g <span class="comment"># set _g to the correct instance again</span>
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     hardcopy.__doc__ = BaseClass.hardcopy.__doc__ + hardcopy.__doc__
<a name="l00584"></a>00584             
<a name="l00585"></a>00585     <span class="comment"># Colormaps:</span>
<a name="l00586"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#334bc59b9bdf4b621a73a95b2e6b52a3">00586</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#334bc59b9bdf4b621a73a95b2e6b52a3">hsv</a>(self, m=0, model='HSV'):
<a name="l00587"></a>00587         c = <span class="stringliteral">'rgbformulae 3,2,2'</span>
<a name="l00588"></a>00588         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00589"></a>00589     
<a name="l00590"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#a10c81e1e6d6b62447d7f5525a746dc8">00590</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#a10c81e1e6d6b62447d7f5525a746dc8">hot</a>(self, m=0, model='RGB'):
<a name="l00591"></a>00591         c = <span class="stringliteral">'rgbformulae 21,22,23'</span>
<a name="l00592"></a>00592         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00593"></a>00593     
<a name="l00594"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#45e2d4082197fe6db51a23f7f2f8a078">00594</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#45e2d4082197fe6db51a23f7f2f8a078">gray</a>(self, m=0, model='RGB'):
<a name="l00595"></a>00595         c = <span class="stringliteral">'defined (0 "black", 1 "white")'</span>
<a name="l00596"></a>00596         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00597"></a>00597     
<a name="l00598"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#7c82acab4115e90fd4c0debab6957652">00598</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#7c82acab4115e90fd4c0debab6957652">bone</a>(self, m=0, model='RGB'):
<a name="l00599"></a>00599         c = <span class="stringliteral">'defined (0 "black", 4 "light-blue", 5 "white")'</span>
<a name="l00600"></a>00600         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00601"></a>00601     
<a name="l00602"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#7299ed8834446137f7015a041c8ab501">00602</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#7299ed8834446137f7015a041c8ab501">copper</a>(self, m=0, model='RGB'):
<a name="l00603"></a>00603         c = <span class="stringliteral">'defined (0 "black", 1 "coral")'</span>
<a name="l00604"></a>00604         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00605"></a>00605     
<a name="l00606"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#4f9e161ca4416fb6b2ff8367bf9e037f">00606</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#4f9e161ca4416fb6b2ff8367bf9e037f">pink</a>(self, m=0, model='RGB'):
<a name="l00607"></a>00607         c = <span class="stringliteral">'defined (0 "black", 1 "pink", 8 "pink", 10 "white")'</span>
<a name="l00608"></a>00608         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00609"></a>00609     
<a name="l00610"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#a7b2f2a120f05248d6a6452236e1d5aa">00610</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#a7b2f2a120f05248d6a6452236e1d5aa">white</a>(self, m=0, model='RGB'):
<a name="l00611"></a>00611         c = <span class="stringliteral">'defined (0 "white", 1 "white")'</span>
<a name="l00612"></a>00612         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00613"></a>00613     
<a name="l00614"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#ebb9d4814d5d5893eb27867031c63d28">00614</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#ebb9d4814d5d5893eb27867031c63d28">flag</a>(self, m=0, model='RGB'):
<a name="l00615"></a>00615         colors = <span class="stringliteral">"red,white,blue,black"</span>.split(<span class="stringliteral">','</span>)
<a name="l00616"></a>00616         j=k=0
<a name="l00617"></a>00617         c = <span class="stringliteral">'defined ('</span>
<a name="l00618"></a>00618         <span class="keywordflow">while</span> k &lt; 16:
<a name="l00619"></a>00619             i = 0
<a name="l00620"></a>00620             <span class="keywordflow">while</span> i &lt; len(colors)-1:
<a name="l00621"></a>00621                 j += 1;  i += 2
<a name="l00622"></a>00622                 c += <span class="stringliteral">'%d "%s", %d "%s", '</span> % (j-1,colors[i-2],j,colors[i-1])
<a name="l00623"></a>00623             k += 1
<a name="l00624"></a>00624         c = c[:-2]+<span class="stringliteral">')'</span>
<a name="l00625"></a>00625         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00626"></a>00626                 
<a name="l00627"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#eb3dd8fec4bd6c8056e3a02b21cddc13">00627</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#eb3dd8fec4bd6c8056e3a02b21cddc13">lines</a>(self, m=0, model='RGB'):
<a name="l00628"></a>00628         <span class="comment"># Note: not finished</span>
<a name="l00629"></a>00629         colors = <span class="stringliteral">"blue,green,red,cyan,magenta,yellow,black"</span>.split(<span class="stringliteral">','</span>)
<a name="l00630"></a>00630         j=k=0
<a name="l00631"></a>00631         c = <span class="stringliteral">'defined ('</span>
<a name="l00632"></a>00632         <span class="keywordflow">while</span> k &lt; 9:
<a name="l00633"></a>00633             i = 0
<a name="l00634"></a>00634             c += <span class="stringliteral">'%d "%s"'</span> % (j,colors[0])
<a name="l00635"></a>00635             <span class="keywordflow">while</span> i &lt; len(colors)-1:
<a name="l00636"></a>00636                 j += 1;  i += 2
<a name="l00637"></a>00637                 c += <span class="stringliteral">', %d "%s", %d "%s"'</span> % (j,colors[i-1],j,colors[i])
<a name="l00638"></a>00638             k += 1
<a name="l00639"></a>00639             c += <span class="stringliteral">', '</span>
<a name="l00640"></a>00640         c = c[:-2]+<span class="stringliteral">')'</span>
<a name="l00641"></a>00641         <span class="comment">#print c</span>
<a name="l00642"></a>00642         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00643"></a>00643     
<a name="l00644"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#0299fcf7836b1a26a3da35d1218ac950">00644</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#0299fcf7836b1a26a3da35d1218ac950">colorcube</a>(self, m=0, model='RGB'):
<a name="l00645"></a>00645         colors = <span class="stringliteral">"white,black,gray0,gray10,grey20,grey30,gray40,gray50,"</span>\
<a name="l00646"></a>00646                  <span class="stringliteral">"gray60,grey70,grey80,gray90,grey100,grey,light-grey,"</span>\
<a name="l00647"></a>00647                  <span class="stringliteral">"dark-grey,red,light-red,dark-red,yellow,light-yellow,"</span>\
<a name="l00648"></a>00648                  <span class="stringliteral">"dark-yellow,green,light-green,dark-green,spring-green,"</span>\
<a name="l00649"></a>00649                  <span class="stringliteral">"forest-green,sea-green,blue,light-blue,dark-blue,"</span>\
<a name="l00650"></a>00650                  <span class="stringliteral">"midnight-blue,navy,medium-blue,royalblue,skyblue,cyan,"</span>\
<a name="l00651"></a>00651                  <span class="stringliteral">"light-cyan,dark-cyan,magenta,light-magenta,dark-magenta,"</span>\
<a name="l00652"></a>00652                  <span class="stringliteral">"turquoise,light-turquoise,dark-turquoise,pink,light-pink,"</span>\
<a name="l00653"></a>00653                  <span class="stringliteral">"dark-pink,coral,light-coral,orange-red,salmon,light-salmon,"</span>\
<a name="l00654"></a>00654                  <span class="stringliteral">"dark-salmon,aquamarine,khaki,dark-khaki,gold,goldenrod,"</span>\
<a name="l00655"></a>00655                  <span class="stringliteral">"light-goldenrod,dark-goldenrod,beige,brown,orange,"</span>\
<a name="l00656"></a>00656                  <span class="stringliteral">"dark-orange,violet,dark-violet,plum,purple"</span>.split(<span class="stringliteral">','</span>)
<a name="l00657"></a>00657         i=j=0
<a name="l00658"></a>00658         c = <span class="stringliteral">'defined (%d "%s"'</span> % (i,colors[0])
<a name="l00659"></a>00659         <span class="keywordflow">while</span> i &lt; len(colors)-1:
<a name="l00660"></a>00660             j += 1;  i += 2
<a name="l00661"></a>00661             c += <span class="stringliteral">', %d "%s", %d "%s"'</span> % (j,colors[i-1],j,colors[i])
<a name="l00662"></a>00662         c += <span class="stringliteral">')'</span>
<a name="l00663"></a>00663         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00664"></a>00664     
<a name="l00665"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#830f7e6e161504af9052ea60f833e3f4">00665</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#830f7e6e161504af9052ea60f833e3f4">vga</a>(self, m=0, model='RGB'):
<a name="l00666"></a>00666         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00667"></a>00667     
<a name="l00668"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#48cd903d8a5e04fb6e5b892ce4daa9d4">00668</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#48cd903d8a5e04fb6e5b892ce4daa9d4">jet</a>(self, m=0, model='RGB'):
<a name="l00669"></a>00669         c = <span class="stringliteral">'defined (0 "blue", 3 "cyan", 4 "green", 5 "yellow", '</span>\
<a name="l00670"></a>00670             <span class="stringliteral">'8 "red", 10 "black")'</span> <span class="comment"># stop at red (remove black)</span>
<a name="l00671"></a>00671         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00672"></a>00672     
<a name="l00673"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#f3851bf6c0bdf2c077dd77f3e8853f9e">00673</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#f3851bf6c0bdf2c077dd77f3e8853f9e">prism</a>(self, m=0, model='RGB'):
<a name="l00674"></a>00674         <span class="keywordflow">return</span> <span class="keywordtype">None</span>
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#57711081a571f567699804111f99fc28">00676</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#57711081a571f567699804111f99fc28">cool</a>(self, m=0, model='RGB'):
<a name="l00677"></a>00677         c = <span class="stringliteral">'defined (0 "cyan", 1 "magenta")'</span>
<a name="l00678"></a>00678         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00679"></a>00679     
<a name="l00680"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#b5a5b047b8fd673b2390f2255e048daf">00680</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#b5a5b047b8fd673b2390f2255e048daf">autumn</a>(self, m=0, model='RGB'):
<a name="l00681"></a>00681         c = <span class="stringliteral">'defined (0 "red", 1 "yellow")'</span>
<a name="l00682"></a>00682         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00683"></a>00683     
<a name="l00684"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#0fcc70fc75c94d7502cb9a2681ec45a2">00684</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#0fcc70fc75c94d7502cb9a2681ec45a2">spring</a>(self, m=0, model='RGB'):
<a name="l00685"></a>00685         c = <span class="stringliteral">'defined (0 "magenta", 1 "yellow")'</span>
<a name="l00686"></a>00686         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00687"></a>00687     
<a name="l00688"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#f962463dcd838ead59981d57725915e1">00688</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#f962463dcd838ead59981d57725915e1">winter</a>(self, m=0, model='RGB'):
<a name="l00689"></a>00689         c = <span class="stringliteral">'defined (0 "blue", 1 "spring-green")'</span>
<a name="l00690"></a>00690         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00691"></a>00691     
<a name="l00692"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#b750fbc53f05718127692e6bbd16e8e2">00692</a>     <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#b750fbc53f05718127692e6bbd16e8e2">summer</a>(self, m=0, model='RGB'):
<a name="l00693"></a>00693         c = <span class="stringliteral">'defined (0 "green", 1 "yellow")'</span>
<a name="l00694"></a>00694         <span class="keywordflow">return</span> <span class="stringliteral">'set palette model %s maxcolors %d %s'</span> % (model,m,c)
<a name="l00695"></a>00695     
<a name="l00696"></a>00696                       
<a name="l00697"></a>00697 plt = GnuplotBackend() <span class="comment"># Create backend instance</span>
<a name="l00698"></a>00698 use(plt, globals()) <span class="comment"># Export public namespace of plt to globals()</span>
<a name="l00699"></a>00699 
<a name="l00700"></a><a class="code" href="namespacegraphics_1_1gnuplot__.html#424ff905b3da11f9c14f68a29c7fe089">00700</a> <span class="keyword">def </span><a class="code" href="namespacegraphics_1_1gnuplot__.html#424ff905b3da11f9c14f68a29c7fe089">get_backend</a>():
<a name="l00701"></a>00701     <span class="keywordflow">return</span> plt._g
<a name="l00702"></a>00702 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 28 18:29:16 2007 for graphics by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
