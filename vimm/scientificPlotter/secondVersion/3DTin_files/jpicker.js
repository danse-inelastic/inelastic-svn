(function(v){var ba=function(d,g){var a=this,f=d.find("img:first"),p=0,o=100,u=100,r=0,s=100,y=100,F=0,t=0,n,e,G=[],M=function(q){for(var m=0;m<G.length;m++)G[m].call(a,a,q)},w=function(q){var m=d.offset();n={l:m.left|0,t:m.top|0};clearTimeout(e);e=setTimeout(function(){D.call(a,q)},0);v(document).bind("mousemove",j).bind("mouseup",h);q.stopPropagation();q.preventDefault();return false},j=function(q){clearTimeout(e);e=setTimeout(function(){D.call(a,q)},0);q.stopPropagation();q.preventDefault();return false},
h=function(q){v(document).unbind("mouseup",h).unbind("mousemove",j);q.stopPropagation();q.preventDefault();return false},D=function(q){var m=q.pageX-n.l;q=q.pageY-n.t;var K=d.w,H=d.h;if(m<0)m=0;else if(m>K)m=K;if(q<0)q=0;else if(q>H)q=H;Q.call(a,"xy",{x:m/K*u+p,y:q/H*y+r})},Q=function(q,m,K){if(m===undefined){if(q===undefined||q==null)q="xy";switch(q.toLowerCase()){case "x":return F;case "y":return t;case "xy":default:return{x:F,y:t}}}if(!(K!=null&&K==a)){var H=false,I,J;if(q==null)q="xy";switch(q.toLowerCase()){case "x":I=
m&&(m.x&&m.x|0||m|0)||0;break;case "y":J=m&&(m.y&&m.y|0||m|0)||0;break;case "xy":default:I=m&&m.x&&m.x|0||0;J=m&&m.y&&m.y|0||0;break}if(I!=null){if(I<p)I=p;else if(I>o)I=o;if(F!=I){F=I;H=true}}if(J!=null){if(J<r)J=r;else if(J>s)J=s;if(t!=J){t=J;H=true}}H&&M.call(a,K||a)}},R=function(q){v.isFunction(q)&&G.push(q)};v.extend(true,a,{val:Q,range:function(q,m){if(m===undefined){if(q===undefined||q==null)q="all";switch(q.toLowerCase()){case "minx":return p;case "maxx":return o;case "rangex":return{minX:p,
maxX:o,rangeX:u};case "miny":return r;case "maxy":return s;case "rangey":return{minY:r,maxY:s,rangeY:y};case "all":default:return{minX:p,maxX:o,rangeX:u,minY:r,maxY:s,rangeY:y}}}var K,H,I,J;if(q==null)q="all";switch(q.toLowerCase()){case "minx":K=m&&(m.minX&&m.minX|0||m|0)||0;break;case "maxx":H=m&&(m.maxX&&m.maxX|0||m|0)||0;break;case "rangex":K=m&&m.minX&&m.minX|0||0;H=m&&m.maxX&&m.maxX|0||0;break;case "miny":I=m&&(m.minY&&m.minY|0||m|0)||0;break;case "maxy":J=m&&(m.maxY&&m.maxY|0||m|0)||0;break;
case "rangey":I=m&&m.minY&&m.minY|0||0;J=m&&m.maxY&&m.maxY|0||0;break;case "all":default:K=m&&m.minX&&m.minX|0||0;H=m&&m.maxX&&m.maxX|0||0;I=m&&m.minY&&m.minY|0||0;J=m&&m.maxY&&m.maxY|0||0;break}if(K!=null&&p!=K){p=K;u=o-p}if(H!=null&&o!=H){o=H;u=o-p}if(I!=null&&r!=I){r=I;y=s-r}if(J!=null&&s!=J){s=J;y=s-r}},bind:R,unbind:function(q){if(v.isFunction(q))for(var m;(m=v.inArray(q,G))!=-1;)G.splice(m,1)},destroy:function(){v(document).unbind("mouseup",h).unbind("mousemove",j);d.unbind("mousedown",w);G=
f=d=null}});f.src=g.arrow&&g.arrow.image;f.w=g.arrow&&g.arrow.width||f.width();f.h=g.arrow&&g.arrow.height||f.height();d.w=g.map&&g.map.width||d.width();d.h=g.map&&g.map.height||d.height();d.bind("mousedown",w);R.call(a,function(){var q=0,m=0,K=d.w,H=d.h,I=f.w,J=f.h;setTimeout(function(){if(u>0)q=F==o?K:F/u*K|0;if(y>0)m=t==s?H:t/y*H|0;if(I>=K)q=(K>>1)-(I>>1);else q-=I>>1;if(J>=H)m=(H>>1)-(J>>1);else m-=J>>1;f.css({left:q+"px",top:m+"px"})},0)})},sa=function(d,g,a){var f=this;d=d.find("td.Text input");
var p=d.eq(3),o=d.eq(4),u=d.eq(5),r=d.length>7?d.eq(6):null,s=d.eq(0),y=d.eq(1),F=d.eq(2),t=d.eq(d.length>7?7:6),n=d.length>7?d.eq(8):null,e=function(h){if(!(h.target.value==""&&h.target!=t.get(0)&&(a!=null&&h.target!=a.get(0)||a==null))){if(!M(h))return h;switch(h.target){case p.get(0):p.val(w.call(f,p.val(),0,255));g.val("r",p.val(),h.target);break;case o.get(0):o.val(w.call(f,o.val(),0,255));g.val("g",o.val(),h.target);break;case u.get(0):u.val(w.call(f,u.val(),0,255));g.val("b",u.val(),h.target);
break;case r&&r.get(0):r.val(w.call(f,r.val(),0,100));g.val("a",r.val(),h.target);break;case s.get(0):s.val(w.call(f,s.val(),0,360));g.val("h",s.val(),h.target);break;case y.get(0):y.val(w.call(f,y.val(),0,100));g.val("s",y.val(),h.target);break;case F.get(0):F.val(w.call(f,F.val(),0,100));g.val("v",F.val(),h.target);break;case t.get(0):t.val(t.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6));a&&a.val(t.val());g.val("hex",t.val()!=""?t.val():null,h.target);break;case a&&a.get(0):a.val(a.val().replace(/[^a-fA-F0-9]/g,
"").toLowerCase().substring(0,6));t.val(a.val());g.val("hex",a.val()!=""?a.val():null,h.target);break;case n&&n.get(0):n.val(n.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2));g.val("a",n.val()!=null?parseInt(n.val(),16)*100/255:null,h.target);break}}},G=function(h){if(g.val()!=null)switch(h.target){case p.get(0):p.val(g.val("r"));break;case o.get(0):o.val(g.val("g"));break;case u.get(0):u.val(g.val("b"));break;case r&&r.get(0):r.val(g.val("a"));break;case s.get(0):s.val(g.val("h"));
break;case y.get(0):y.val(g.val("s"));break;case F.get(0):F.val(g.val("v"));break;case t.get(0):case a&&a.get(0):t.val(g.val("hex"));a&&a.val(g.val("hex"));break;case n&&n.get(0):n.val(g.val("ahex").substring(6));break}},M=function(h){switch(h.keyCode){case 9:case 16:case 29:case 37:case 38:case 40:return false;case "c".charCodeAt():case "v".charCodeAt():if(h.ctrlKey)return false}return true},w=function(h,D,Q){if(h==""||isNaN(h))return D;if(h>Q)return Q;if(h<D)return D;return h},j=function(h,D){h=
h.val("all");if(D!=p.get(0))p.val(h!=null?h.r:"");if(D!=o.get(0))o.val(h!=null?h.g:"");if(D!=u.get(0))u.val(h!=null?h.b:"");if(r&&D!=r.get(0))r.val(h!=null?h.a:"");if(D!=s.get(0))s.val(h!=null?h.h:"");if(D!=y.get(0))y.val(h!=null?h.s:"");if(D!=F.get(0))F.val(h!=null?h.v:"");if(D!=t.get(0)&&(a&&D!=a.get(0)||!a))t.val(h!=null?h.hex:"");if(a&&D!=a.get(0)&&D!=t.get(0))a.val(h!=null?h.hex:"");if(n&&D!=n.get(0))n.val(h!=null?h.ahex.substring(6):"")};v.extend(true,f,{destroy:function(){p.add(o).add(u).add(r).add(s).add(y).add(F).add(t).add(a).add(n).unbind("keyup",
e).unbind("blur",G);g.unbind(j);n=t=F=y=s=r=u=o=p=null}});p.add(o).add(u).add(r).add(s).add(y).add(F).add(t).add(a).add(n).bind("keyup",e).bind("blur",G);g.bind(j)};v.jPicker={List:[],Color:function(d){var g=this,a,f,p,o,u,r,s,y=[],F=function(n){for(var e=0;e<y.length;e++)y[e].call(g,g,n)},t=function(n,e,G){if(e===undefined){if(n===undefined||n==null||n=="")n="all";switch(n.toLowerCase()){case "ahex":return a!=null?S.rgbaToHex({r:a,g:f,b:p,a:o}):null;case "hex":return(e=t("ahex"))&&e.substring(0,
6)||null;case "all":return a!=null?{r:a,g:f,b:p,a:o,h:u,s:r,v:s,hex:t.call(g,"hex"),ahex:t.call(g,"ahex")}:null;default:e={};for(var M=0;M<n.length;M++)switch(n.charAt(M)){case "r":if(n.length==1)e=a;else e.r=a;break;case "g":if(n.length==1)e=f;else e.g=f;break;case "b":if(n.length==1)e=p;else e.b=p;break;case "a":if(n.length==1)e=o;else e.a=o;break;case "h":if(n.length==1)e=u;else e.h=u;break;case "s":if(n.length==1)e=r;else e.s=r;break;case "v":if(n.length==1)e=s;else e.v=s;break}return e=={}?t.call(g,
"all"):e}}if(!(G!=null&&G==g)){var w=false;if(n==null)n="";if(e==null){if(a!=null){a=null;w=true}if(f!=null){f=null;w=true}if(p!=null){p=null;w=true}if(o!=null){o=null;w=true}if(u!=null){u=null;w=true}if(r!=null){r=null;w=true}if(s!=null){s=null;w=true}w&&F.call(g,G||g)}else switch(n.toLowerCase()){case "ahex":case "hex":e=S.hexToRgba(e&&(e.ahex||e.hex)||e||"00000000");t.call(g,"rgba",{r:e.r,g:e.g,b:e.b,a:n=="ahex"?e.a:o!=null?o:100},G);break;default:if(e&&(e.ahex!=null||e.hex!=null)){t.call(g,"ahex",
e.ahex||e.hex||"00000000",G);return}var j={},h=false,D=false;if(e.r!==undefined&&!n.indexOf("r")==-1)n+="r";if(e.g!==undefined&&!n.indexOf("g")==-1)n+="g";if(e.b!==undefined&&!n.indexOf("b")==-1)n+="b";if(e.a!==undefined&&!n.indexOf("a")==-1)n+="a";if(e.h!==undefined&&!n.indexOf("h")==-1)n+="h";if(e.s!==undefined&&!n.indexOf("s")==-1)n+="s";if(e.v!==undefined&&!n.indexOf("v")==-1)n+="v";for(M=0;M<n.length;M++)switch(n.charAt(M)){case "r":if(D)continue;h=true;j.r=e&&e.r&&e.r|0||e&&e|0||0;if(j.r<0)j.r=
0;else if(j.r>255)j.r=255;if(a!=j.r){a=j.r;w=true}break;case "g":if(D)continue;h=true;j.g=e&&e.g&&e.g|0||e&&e|0||0;if(j.g<0)j.g=0;else if(j.g>255)j.g=255;if(f!=j.g){f=j.g;w=true}break;case "b":if(D)continue;h=true;j.b=e&&e.b&&e.b|0||e&&e|0||0;if(j.b<0)j.b=0;else if(j.b>255)j.b=255;if(p!=j.b){p=j.b;w=true}break;case "a":j.a=e&&e.a!=null?e.a|0:e!=null?e|0:100;if(j.a<0)j.a=0;else if(j.a>100)j.a=100;if(o!=j.a){o=j.a;w=true}break;case "h":if(h)continue;D=true;j.h=e&&e.h&&e.h|0||e&&e|0||0;if(j.h<0)j.h=
0;else if(j.h>360)j.h=360;if(u!=j.h){u=j.h;w=true}break;case "s":if(h)continue;D=true;j.s=e&&e.s!=null?e.s|0:e!=null?e|0:100;if(j.s<0)j.s=0;else if(j.s>100)j.s=100;if(r!=j.s){r=j.s;w=true}break;case "v":if(h)continue;D=true;j.v=e&&e.v!=null?e.v|0:e!=null?e|0:100;if(j.v<0)j.v=0;else if(j.v>100)j.v=100;if(s!=j.v){s=j.v;w=true}break}if(w){if(h){a=a||0;f=f||0;p=p||0;e=S.rgbToHsv({r:a,g:f,b:p});u=e.h;r=e.s;s=e.v}else if(D){u=u||0;r=r!=null?r:100;s=s!=null?s:100;e=S.hsvToRgb({h:u,s:r,v:s});a=e.r;f=e.g;
p=e.b}o=o!=null?o:100;F.call(g,G||g)}break}}};v.extend(true,g,{val:t,bind:function(n){v.isFunction(n)&&y.push(n)},unbind:function(n){if(v.isFunction(n))for(var e;(e=v.inArray(n,y))!=-1;)y.splice(e,1)},destroy:function(){y=null}});if(d)if(d.hex!=null)t("hex",d);else if(d.ahex!=null)t("ahex",d);else if(d.r!=null&&d.g!=null&&d.b!=null)t("rgb",d);else d.h!=null&&d.s!=null&&d.v!=null&&t("hsv",d)},ColorMethods:{hexToRgba:function(d){d=this.validateHex(d);if(d=="")return{r:null,g:null,b:null,a:null};var g=
"00",a="00",f="00",p="100";if(d.length==6)d+="ff";if(d.length>6){g=d.substring(0,2);a=d.substring(2,4);f=d.substring(4,6);p=d.substring(6,d.length)}else{if(d.length>4){g=d.substring(4,d.length);d=d.substring(0,4)}if(d.length>2){a=d.substring(2,d.length);d=d.substring(0,2)}if(d.length>0)f=d.substring(0,d.length)}return{r:this.hexToInt(g),g:this.hexToInt(a),b:this.hexToInt(f),a:this.hexToInt(p)*100/255|0}},validateHex:function(d){d=d.toLowerCase().replace(/[^a-f0-9]/g,"");if(d.length>8)d=d.substring(0,
8);return d},rgbaToHex:function(d){return this.intToHex(d.r)+this.intToHex(d.g)+this.intToHex(d.b)+this.intToHex(d.a*255/100|0)},intToHex:function(d){d=(d|0).toString(16);if(d.length==1)d="0"+d;return d.toLowerCase()},hexToInt:function(d){return parseInt(d,16)},rgbToHsv:function(d){var g=d.r/255,a=d.g/255;d=d.b/255;var f={h:0,s:0,v:0},p=0,o=0;if(g>=a&&g>=d){o=g;p=a>d?d:a}else if(a>=d&&a>=g){o=a;p=g>d?d:g}else{o=d;p=a>g?g:a}f.v=o;f.s=o?(o-p)/o:0;if(f.s){p=o-p;f.h=g==o?(a-d)/p:a==o?2+(d-g)/p:4+(g-a)/
p;f.h=parseInt(f.h*60);if(f.h<0)f.h+=360}else f.h=0;f.s=f.s*100|0;f.v=f.v*100|0;return f},hsvToRgb:function(d){var g={r:0,g:0,b:0,a:100},a=d.h,f=d.s;d=d.v;if(f==0)g.r=d==0?(g.g=g.b=0):(g.g=g.b=d*255/100|0);else{if(a==360)a=0;a/=60;f/=100;d/=100;var p=a|0,o=a-p;a=d*(1-f);var u=d*(1-f*o);f=d*(1-f*(1-o));switch(p){case 0:g.r=d;g.g=f;g.b=a;break;case 1:g.r=u;g.g=d;g.b=a;break;case 2:g.r=a;g.g=d;g.b=f;break;case 3:g.r=a;g.g=u;g.b=d;break;case 4:g.r=f;g.g=a;g.b=d;break;case 5:g.r=d;g.g=a;g.b=u;break}g.r=
g.r*255|0;g.g=g.g*255|0;g.b=g.b*255|0}return g}}};var l=v.jPicker.Color,B=v.jPicker.List,S=v.jPicker.ColorMethods;v.fn.jPicker=function(d){var g=arguments;return this.each(function(){var a=this,f=v.extend(true,{},v.fn.jPicker.defaults,d);if(v(a).get(0).nodeName.toLowerCase()=="input"){v.extend(true,f,{window:{bindToInput:true,expandable:true,input:v(a)}});if(S.validateHex(v(a).val())){f.color.active=new l({hex:v(a).val(),a:f.color.active.val("a")});f.color.current=new l({hex:v(a).val(),a:f.color.active.val("a")})}}if(f.window.expandable)v(a).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>');
else f.window.liveUpdate=false;var p=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,o=null,u=null,r=null,s=null,y=null,F=null,t=null,n=null,e=null,G=null,M=null,w=null,j=null,h=null,D=null,Q=null,R=null,q=null,m=null,K=null,H=null,I=null,J=null,T=null,ca=null,U=null,da=null,ea=null,ga=function(b){var c=x.active,k=c.val("hex"),L,O;f.color.mode=b;switch(b){case "h":setTimeout(function(){N.call(a,u,"transparent");E.call(a,s,0);z.call(a,s,100);E.call(a,y,260);z.call(a,y,100);
N.call(a,r,"transparent");E.call(a,t,0);z.call(a,t,100);E.call(a,n,260);z.call(a,n,100);E.call(a,e,260);z.call(a,e,100);E.call(a,G,260);z.call(a,G,100);E.call(a,w,260);z.call(a,w,100)},0);j.range("all",{minX:0,maxX:100,minY:0,maxY:100});h.range("rangeY",{minY:0,maxY:360});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("s"),y:100-c.val("v")},j);h.val("y",360-c.val("h"),h);break;case "s":setTimeout(function(){N.call(a,u,"transparent");E.call(a,s,-260);E.call(a,y,-520);E.call(a,t,-260);E.call(a,n,
-520);E.call(a,w,260);z.call(a,w,100)},0);j.range("all",{minX:0,maxX:360,minY:0,maxY:100});h.range("rangeY",{minY:0,maxY:100});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("h"),y:100-c.val("v")},j);h.val("y",100-c.val("s"),h);break;case "v":setTimeout(function(){N.call(a,u,"000000");E.call(a,s,-780);E.call(a,y,260);N.call(a,r,k);E.call(a,t,-520);E.call(a,n,260);z.call(a,n,100);E.call(a,w,260);z.call(a,w,100)},0);j.range("all",{minX:0,maxX:360,minY:0,maxY:100});h.range("rangeY",{minY:0,maxY:100});
if(c.val("ahex")==null)break;j.val("xy",{x:c.val("h"),y:100-c.val("s")},j);h.val("y",100-c.val("v"),h);break;case "r":L=-1040;O=-780;j.range("all",{minX:0,maxX:255,minY:0,maxY:255});h.range("rangeY",{minY:0,maxY:255});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("b"),y:255-c.val("g")},j);h.val("y",255-c.val("r"),h);break;case "g":L=-1560;O=-1820;j.range("all",{minX:0,maxX:255,minY:0,maxY:255});h.range("rangeY",{minY:0,maxY:255});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("b"),y:255-c.val("r")},
j);h.val("y",255-c.val("g"),h);break;case "b":L=-2080;O=-2860;j.range("all",{minX:0,maxX:255,minY:0,maxY:255});h.range("rangeY",{minY:0,maxY:255});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("r"),y:255-c.val("g")},j);h.val("y",255-c.val("b"),h);break;case "a":setTimeout(function(){N.call(a,u,"transparent");E.call(a,s,-260);E.call(a,y,-520);E.call(a,t,260);E.call(a,n,260);z.call(a,n,100);E.call(a,w,0);z.call(a,w,100)},0);j.range("all",{minX:0,maxX:360,minY:0,maxY:100});h.range("rangeY",{minY:0,
maxY:100});if(c.val("ahex")==null)break;j.val("xy",{x:c.val("h"),y:100-c.val("v")},j);h.val("y",100-c.val("a"),h);break;default:throw"Invalid Mode";}switch(b){case "h":break;case "s":case "v":case "a":setTimeout(function(){z.call(a,s,100);z.call(a,t,100);E.call(a,e,260);z.call(a,e,100);E.call(a,G,260);z.call(a,G,100)},0);break;case "r":case "g":case "b":setTimeout(function(){N.call(a,u,"transparent");N.call(a,r,"transparent");z.call(a,t,100);z.call(a,s,100);E.call(a,s,L);E.call(a,y,L-260);E.call(a,
t,O-780);E.call(a,n,O-520);E.call(a,e,O);E.call(a,G,O-260);E.call(a,w,260);z.call(a,w,100)},0);break}c.val("ahex")!=null&&fa.call(a,c)},fa=function(b,c){if(c==null||c!=h&&c!=j)ta.call(a,b,c);setTimeout(function(){ua.call(a,b);va.call(a,b);wa.call(a,b)},0)},xa=function(b,c){var k=x.active;if(!(c!=j&&k.val()==null)){b=b.val("all");switch(f.color.mode){case "h":k.val("sv",{s:b.x,v:100-b.y},c);break;case "s":case "a":k.val("hv",{h:b.x,v:100-b.y},c);break;case "v":k.val("hs",{h:b.x,s:100-b.y},c);break;
case "r":k.val("gb",{g:255-b.y,b:b.x},c);break;case "g":k.val("rb",{r:255-b.y,b:b.x},c);break;case "b":k.val("rg",{r:b.x,g:255-b.y},c);break}}},ya=function(b,c){var k=x.active;if(!(c!=h&&k.val()==null))switch(f.color.mode){case "h":k.val("h",{h:360-b.val("y")},c);break;case "s":k.val("s",{s:100-b.val("y")},c);break;case "v":k.val("v",{v:100-b.val("y")},c);break;case "r":k.val("r",{r:255-b.val("y")},c);break;case "g":k.val("g",{g:255-b.val("y")},c);break;case "b":k.val("b",{b:255-b.val("y")},c);break;
case "a":k.val("a",100-b.val("y"),c);break}},ta=function(b,c){if(c!=j)switch(f.color.mode){case "h":var k=b.val("sv");j.val("xy",{x:k!=null?k.s:100,y:100-(k!=null?k.v:100)},c);break;case "s":case "a":k=b.val("hv");j.val("xy",{x:k&&k.h||0,y:100-(k!=null?k.v:100)},c);break;case "v":k=b.val("hs");j.val("xy",{x:k&&k.h||0,y:100-(k!=null?k.s:100)},c);break;case "r":k=b.val("bg");j.val("xy",{x:k&&k.b||0,y:255-(k&&k.g||0)},c);break;case "g":k=b.val("br");j.val("xy",{x:k&&k.b||0,y:255-(k&&k.r||0)},c);break;
case "b":k=b.val("rg");j.val("xy",{x:k&&k.r||0,y:255-(k&&k.g||0)},c);break}if(c!=h)switch(f.color.mode){case "h":h.val("y",360-(b.val("h")||0),c);break;case "s":b=b.val("s");h.val("y",100-(b!=null?b:100),c);break;case "v":b=b.val("v");h.val("y",100-(b!=null?b:100),c);break;case "r":h.val("y",255-(b.val("r")||0),c);break;case "g":h.val("y",255-(b.val("g")||0),c);break;case "b":h.val("y",255-(b.val("b")||0),c);break;case "a":b=b.val("a");h.val("y",100-(b!=null?b:100),c);break}},ua=function(b){try{var c=
b.val("all");K.css({backgroundColor:c&&"#"+c.hex||"transparent"});z.call(a,K,c&&c.a||0)}catch(k){}},va=function(b){switch(f.color.mode){case "h":N.call(a,u,(new l({h:b.val("h")||0,s:100,v:100})).val("hex"));break;case "s":case "a":var c=b.val("s");z.call(a,y,100-(c!=null?c:100));break;case "v":c=b.val("v");z.call(a,s,c!=null?c:100);break;case "r":z.call(a,y,(b.val("r")||0)/255*100);break;case "g":z.call(a,y,(b.val("g")||0)/255*100);break;case "b":z.call(a,y,(b.val("b")||0)/255*100);break}b=b.val("a");
z.call(a,F,100-(b||0))},wa=function(b){switch(f.color.mode){case "h":var c=b.val("a");z.call(a,M,100-(c||0));break;case "s":c=b.val("hva");var k=new l({h:c&&c.h||0,s:100,v:c!=null?c.v:100});N.call(a,r,k.val("hex"));z.call(a,n,100-(c!=null?c.v:100));z.call(a,M,100-(c&&c.a||0));break;case "v":c=b.val("hsa");k=new l({h:c&&c.h||0,s:c!=null?c.s:100,v:100});N.call(a,r,k.val("hex"));z.call(a,M,100-(c&&c.a||0));break;case "r":case "g":case "b":k=c=0;b=b.val("rgba");if(f.color.mode=="r"){c=b&&b.b||0;k=b&&
b.g||0}else if(f.color.mode=="g"){c=b&&b.b||0;k=b&&b.r||0}else if(f.color.mode=="b"){c=b&&b.r||0;k=b&&b.g||0}var L=k>c?c:k;z.call(a,n,c>k?(c-k)/(255-k)*100:0);z.call(a,e,k>c?(k-c)/(255-c)*100:0);z.call(a,G,L/255*100);z.call(a,M,100-(b&&b.a||0));break;case "a":c=b.val("a");N.call(a,r,b.val("hex")||"000000");z.call(a,M,c!=null?0:100);z.call(a,w,c!=null?100:0);break}},N=function(b,c){b.css({backgroundColor:c&&c.length==6&&"#"+c||"transparent"})},P=function(b,c){if(p&&(c.indexOf("AlphaBar.png")!=-1||
c.indexOf("Bars.png")!=-1||c.indexOf("Maps.png")!=-1)){b.attr("pngSrc",c);b.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale')"})}else b.css({backgroundImage:"url("+c+")"})},E=function(b,c){b.css({top:c+"px"})},z=function(b,c){b.css({visibility:c>0?"visible":"hidden"});if(c>0&&c<100)if(p){var k=b.attr("pngSrc");k!=null&&(k.indexOf("AlphaBar.png")!=-1||k.indexOf("Bars.png")!=-1||k.indexOf("Maps.png")!=-1)?b.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+
k+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+c+")"}):b.css({opacity:c/100})}else b.css({opacity:c/100});else if(c==0||c==100)if(p){k=b.attr("pngSrc");k!=null&&(k.indexOf("AlphaBar.png")!=-1||k.indexOf("Bars.png")!=-1||k.indexOf("Maps.png")!=-1)?b.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+k+"', sizingMethod='scale')"}):b.css({opacity:""})}else b.css({opacity:""})},ha=function(){x.active.val("ahex",x.current.val("ahex"))},za=function(){x.current.val("ahex",
x.active.val("ahex"))},ia=function(b){ga.call(a,b.target.value)},ja=function(){ha.call(a)},ka=function(){ha.call(a);f.window.expandable&&Z.call(a);v.isFunction(V)&&V.call(a,x.active,J)},la=function(){za.call(a);f.window.expandable&&Z.call(a);v.isFunction(W)&&W.call(a,x.active,I)},ma=function(){$.call(a)},Aa=function(b){var c=b.val("hex");H.css({backgroundColor:c&&"#"+c||"transparent"});z.call(a,H,b.val("a")||0)},Ba=function(b){var c=b.val("hex");b=b.val("va");if(A.doColorIcon)ca.css({backgroundColor:c&&
"#"+c||"transparent"});z.call(a,U,100-(b&&b.a||0));if(f.window.bindToInput)f.window.input.css({backgroundColor:c&&"#"+c||"transparent",color:b&&b.v>75?"#000000":"#ffffff"})},pa=function(b){Q=parseInt(o.css("left"));R=parseInt(o.css("top"));q=b.pageX;m=b.pageY;v(document).bind("mousemove",na).bind("mouseup",oa);b.stopPropagation();b.preventDefault();return false},na=function(b){o.css({left:Q-(q-b.pageX)+"px",top:R-(m-b.pageY)+"px"});b.stopPropagation();b.preventDefault();return false},oa=function(b){v(document).unbind("mousemove",
na).unbind("mouseup",oa);b.stopPropagation();b.preventDefault();return false},qa=function(b){b.preventDefault();b.stopPropagation();x.active.val("ahex",v(this).attr("title")||null,b.target);return false},W=v.isFunction(g[1])&&g[1]||null,X=v.isFunction(g[2])&&g[2]||null,V=v.isFunction(g[3])&&g[3]||null,Y=v.isFunction(g[4])&&g[4]||null,$=function(){v.isFunction(Y)&&Y.call(a);if(document.all){var b=false;for(i=0;i<B.length;i++){b&&B[i].icon.css({display:"none"});if(B[i]==a)b=true}}x.current.val("ahex",
x.active.val("ahex"));switch(f.window.effects.type){case "fade":o.fadeIn(f.window.effects.speed.show);break;case "slide":o.slideDown(f.window.effects.speed.show);break;case "show":default:o.show(f.window.effects.speed.show);break}},Z=function(){if(document.all){var b=false;for(i=0;i<B.length;i++){b&&B[i].icon.css({display:"inline-block"});if(B[i]==a)b=true}}switch(f.window.effects.type){case "fade":o.fadeOut(f.window.effects.speed.hide);break;case "slide":o.slideUp(f.window.effects.speed.hide);break;
case "show":default:o.hide(f.window.effects.speed.hide);break}},Ca=function(){var b=f.window;o=b.expandable?v(a).next().find(".Container:first"):v(a);if(b.expandable)o.css({left:b.position.x=="left"?-520-(b.position.y=="center"?25:0)+"px":b.position.x=="center"?"-249px":b.position.x=="right"?0+(b.position.y=="center"?25:0)+"px":b.position.x=="screenCenter"?(v(document).width()>>1)-249-v(a).next().offset().left+"px":b.position.x,position:"absolute",top:b.position.y=="top"?"-312px":b.position.y=="center"?
"-156px":b.position.y=="bottom"?"25px":b.position.y});if((typeof x.active).toString().toLowerCase()=="string")x.active=new l({ahex:x.active});o.html('<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(b.expandable?'<tr><td class="Move" colspan="6">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(b.title||C.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+A.clientPath+A.colorMap.arrow.file+
'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+A.clientPath+A.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="3" class="Preview">'+C.text.newColor+'<div><span class="Active" title="'+C.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+C.tooltips.colors.currentColor+
'">&nbsp;</span></div>'+C.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+C.text.ok+'" title="'+C.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+C.text.cancel+'" title="'+C.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><input type="radio" id="jPicker_Hue_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="h" title="'+C.tooltips.hue.radio+'"'+(f.color.mode=="h"?' checked="checked"':
"")+'/></td><td class="Label"><label for="jPicker_Hue_'+B.length+'" title="'+C.tooltips.hue.radio+'">H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+x.active.val("h")+'" title="'+C.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><input type="radio" id="jPicker_Saturation_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="s" title="'+C.tooltips.saturation.radio+'"'+(f.color.mode=="s"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Saturation_'+
B.length+'" title="'+C.tooltips.saturation.radio+'">S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+x.active.val("s")+'" title="'+C.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><input type="radio" id="jPicker_Value_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="v" title="'+C.tooltips.value.radio+'"'+(f.color.mode=="v"?' checked="checked"':"")+'/><br/><br/></td><td class="Label"><label for="jPicker_Value_'+B.length+'" title="'+
C.tooltips.value.radio+'">V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+x.active.val("v")+'" title="'+C.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><input type="radio" id="jPicker_Red_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="r" title="'+C.tooltips.red.radio+'"'+(f.color.mode=="r"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Red_'+B.length+'" title="'+C.tooltips.red.radio+'">R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+
x.active.val("r")+'" title="'+C.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><input type="radio" id="jPicker_Green_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="g" title="'+C.tooltips.green.radio+'"'+(f.color.mode=="g"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Green_'+B.length+'" title="'+C.tooltips.green.radio+'">G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+x.active.val("g")+'" title="'+C.tooltips.green.textbox+
'"/></td></tr><tr class="Blue"><td class="Radio"><input type="radio" id="jPicker_Blue_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="b" title="'+C.tooltips.blue.radio+'"'+(f.color.mode=="b"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Blue_'+B.length+'" title="'+C.tooltips.blue.radio+'">B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+x.active.val("b")+'" title="'+C.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+
(b.alphaSupport?'<input type="radio" id="jPicker_Alpha_'+B.length+'" name="jPicker_Mode_'+B.length+'" value="a" title="'+C.tooltips.alpha.radio+'"'+(f.color.mode=="a"?' checked="checked"':"")+"/>":"&nbsp;")+'</td><td class="Label">'+(b.alphaSupport?'<label for="jPicker_Alpha_'+B.length+'" title="'+C.tooltips.alpha.radio+'">A:</label>':"&nbsp;")+'</td><td class="Text">'+(b.alphaSupport?'<input type="text" maxlength="3" value="'+x.active.val("a")+'" title="'+C.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+
'</td></tr><tr class="Hex"><td colspan="3" class="Text"><label for="jPicker_Hex_'+B.length+'" title="'+C.tooltips.hex.textbox+'">#:</label><input type="text" maxlength="6" class="Hex" id="jPicker_Hex_'+B.length+'" value="'+x.active.val("hex")+'" title="'+C.tooltips.hex.textbox+'"/>'+(b.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+x.active.val("ahex").substring(6)+'" title="'+C.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>");var c=o.find("tbody:first");u=c.find("div.Map:first");
r=c.find("div.Bar:first");var k=u.find("span"),L=r.find("span");s=k.filter(".Map1:first");y=k.filter(".Map2:first");F=k.filter(".Map3:first");t=L.filter(".Map1:first");n=L.filter(".Map2:first");e=L.filter(".Map3:first");G=L.filter(".Map4:first");M=L.filter(".Map5:first");w=L.filter(".Map6:first");j=new ba(u,{map:{width:A.colorMap.width,height:A.colorMap.height},arrow:{image:A.clientPath+A.colorMap.arrow.file,width:A.colorMap.arrow.width,height:A.colorMap.arrow.height}});j.bind(xa);h=new ba(r,{map:{width:A.colorBar.width,
height:A.colorBar.height},arrow:{image:A.clientPath+A.colorBar.arrow.file,width:A.colorBar.arrow.width,height:A.colorBar.arrow.height}});h.bind(ya);D=new sa(c,x.active,b.expandable&&b.bindToInput?b.input:null);k=x.active.val("hex");var O=c.find(".Preview");L=c.find(".Button");K=O.find(".Active:first").css({backgroundColor:k&&"#"+k||"transparent"});H=O.find(".Current:first").css({backgroundColor:k&&"#"+k||"transparent"}).bind("click",ja);I=L.find(".Ok:first").bind("click",la);J=L.find(".Cancel:first").bind("click",
ka);T=L.find(".Grid:first");setTimeout(function(){P.call(a,s,A.clientPath+"Maps.png");P.call(a,y,A.clientPath+"Maps.png");P.call(a,F,A.clientPath+"map-opacity.png");P.call(a,t,A.clientPath+"Bars.png");P.call(a,n,A.clientPath+"Bars.png");P.call(a,e,A.clientPath+"Bars.png");P.call(a,G,A.clientPath+"Bars.png");P.call(a,M,A.clientPath+"bar-opacity.png");P.call(a,w,A.clientPath+"AlphaBar.png");P.call(a,O.find("div:first"),A.clientPath+"preview-opacity.png")},0);c.find("td.Radio input").bind("click",ia);
if(x.quickList&&x.quickList.length>0){L="";for(i=0;i<x.quickList.length;i++){if((typeof x.quickList[i]).toString().toLowerCase()=="string")x.quickList[i]=new l({hex:x.quickList[i]});var ra=x.quickList[i].val("ahex"),aa=x.quickList[i].val("hex");L+='<span class="QuickColor" title="'+(ra&&"#"+ra||"")+'" style="background-color: '+(aa&&"#"+aa||"transparent")+";"+(aa?"":" background-image: url("+A.clientPath+"NoColor.png);")+'">&nbsp;</span>'}T.html(L);T.find(".QuickColor").click(qa)}ga.call(a,f.color.mode);
x.active.bind(fa);v.isFunction(X)&&x.active.bind(X);x.current.bind(Aa);if(b.expandable){a.icon=o.parents(".Icon:first");if(A.doColorIcon)ca=a.icon.find(".Color:first").css({backgroundColor:k&&"#"+k||"transparent"});U=a.icon.find(".Alpha:first");P.call(a,U,A.clientPath+"bar-opacity.png");z.call(a,U,100-x.active.val("a"));da=a.icon.find(".Image:first").css({backgroundImage:"url("+A.clientPath+A.picker.file+")",width:A.picker.width,height:A.picker.height,padding:A.picker.padding,margin:A.picker.margin}).bind("click",
ma);if(b.bindToInput)b.input.css({backgroundColor:k&&"#"+k||"transparent",color:x.active.val("v")>75?"#000000":"#ffffff"});ea=c.find(".Move:first").bind("mousedown",pa);x.active.bind(Ba)}else $.call(a);B.push(a)},A=f.images,C=f.localization,x={active:(typeof f.color.active).toString().toLowerCase()=="string"?new l({ahex:f.color.active}):new l({ahex:f.color.active.val("ahex")}),current:(typeof f.color.active).toString().toLowerCase()=="string"?new l({ahex:f.color.active}):new l({ahex:f.color.active.val("ahex")}),
quickList:f.color.quickList};v.extend(true,a,{commitCallback:W,liveCallback:X,cancelCallback:V,showCallback:Y,color:x,show:$,hide:Z,destroy:function(){o.find("td.Radio input").unbind("click",ia);H.unbind("click",ja);J.unbind("click",ka);I.unbind("click",la);if(f.window.expandable){da.unbind("click",ma);ea.unbind("mousedown",pa);a.icon=null}o.find(".QuickColor").unbind("click",qa);w=M=G=e=n=t=F=y=s=r=u=null;j.destroy();j=null;h.destroy();h=null;D.destroy();Y=X=V=W=T=J=I=H=K=D=null;o.html("");for(i=
0;i<B.length;i++)B[i]==a&&B.splice(i,1)}});setTimeout(function(){Ca.call(a)},0)})};v.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:false,liveUpdate:true,alphaSupport:false},color:{mode:"h",active:new l({ahex:"#ffcc00ff"}),quickList:[new l({h:360,s:33,v:100}),new l({h:360,s:66,v:100}),new l({h:360,s:100,v:100}),new l({h:360,s:100,v:75}),new l({h:360,s:100,v:50}),new l({h:180,s:0,v:100}),new l({h:30,s:33,
v:100}),new l({h:30,s:66,v:100}),new l({h:30,s:100,v:100}),new l({h:30,s:100,v:75}),new l({h:30,s:100,v:50}),new l({h:180,s:0,v:90}),new l({h:60,s:33,v:100}),new l({h:60,s:66,v:100}),new l({h:60,s:100,v:100}),new l({h:60,s:100,v:75}),new l({h:60,s:100,v:50}),new l({h:180,s:0,v:80}),new l({h:90,s:33,v:100}),new l({h:90,s:66,v:100}),new l({h:90,s:100,v:100}),new l({h:90,s:100,v:75}),new l({h:90,s:100,v:50}),new l({h:180,s:0,v:70}),new l({h:120,s:33,v:100}),new l({h:120,s:66,v:100}),new l({h:120,s:100,
v:100}),new l({h:120,s:100,v:75}),new l({h:120,s:100,v:50}),new l({h:180,s:0,v:60}),new l({h:150,s:33,v:100}),new l({h:150,s:66,v:100}),new l({h:150,s:100,v:100}),new l({h:150,s:100,v:75}),new l({h:150,s:100,v:50}),new l({h:180,s:0,v:50}),new l({h:180,s:33,v:100}),new l({h:180,s:66,v:100}),new l({h:180,s:100,v:100}),new l({h:180,s:100,v:75}),new l({h:180,s:100,v:50}),new l({h:180,s:0,v:40}),new l({h:210,s:33,v:100}),new l({h:210,s:66,v:100}),new l({h:210,s:100,v:100}),new l({h:210,s:100,v:75}),new l({h:210,
s:100,v:50}),new l({h:180,s:0,v:30}),new l({h:240,s:33,v:100}),new l({h:240,s:66,v:100}),new l({h:240,s:100,v:100}),new l({h:240,s:100,v:75}),new l({h:240,s:100,v:50}),new l({h:180,s:0,v:20}),new l({h:270,s:33,v:100}),new l({h:270,s:66,v:100}),new l({h:270,s:100,v:100}),new l({h:270,s:100,v:75}),new l({h:270,s:100,v:50}),new l({h:180,s:0,v:10}),new l({h:300,s:33,v:100}),new l({h:300,s:66,v:100}),new l({h:300,s:100,v:100}),new l({h:300,s:100,v:75}),new l({h:300,s:100,v:50}),new l({h:180,s:0,v:0}),
new l({h:330,s:33,v:100}),new l({h:330,s:66,v:100}),new l({h:330,s:100,v:100}),new l({h:330,s:100,v:75}),new l({h:330,s:100,v:50}),new l]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24,padding:0,margin:0},doColorIcon:true},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",
ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",
textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",
alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}})(jQuery,"1.1.2");
